var resizeTimer;productDisplayJS={loadingshopcart:!1,langId:"-1",storeId:"",catalogId:"",userType:"",skuItems:[],swatchList:[],sizeList:[],configList:[],finishList:[],altViewList:[],sizeConfigList:[],defaultSkuId:null,defaultSkuItem:new Object,selectedSkuId:null,selectedSkuItem:new Object,basicZoomViewer:null,newProduct:!1,productName:"",productThumbnail:"",productPrice:"",category:"",productPartNumber:"",productAddedList:new Object,productId:"",currencySymbol:"",microDImagePath:"",upcOrderItemId:"",microdCartAdded:!1,setMicroDImagePath:function(e){this.microDImagePath=e},setCommonParameters:function(e,t,i,s,n){this.langId=e,this.storeId=t,this.catalogId=i,this.userType=s,this.currencySymbol=n},setProductPartNumber:function(e){this.productPartNumber=e},setCategory:function(e){this.category=e},setProductId:function(e){productDisplayJS.productId=e},testDefaultSkuId:function(){alert(this.defaultSkuId)},setDefaultSkuId:function(e){this.defaultSkuId=e},setDefaultSku:function(){this.setSelectedSku(this.defaultSkuId),this.defaultSkuItem=this.selectedSkuItem},setSelectedSkuToDefault:function(){this.setSelectedSku(this.defaultSkuId)},testSelectedSkuId:function(){alert(this.selectedSkuId)},setSelectedSku:function(e){this.selectedSkuId=e,this.selectedSkuItem=this.setSelectedSkuItem()},testSkuItem:function(e){var t="";t+="skuId: "+e.skuId+"\n",t+="partNumber: "+e.partNumber+"\n",t+="thumbnail: "+e.thumbnail+"\n",t+="swatchId: "+e.swatchId+"\n",t+="swatchName: "+e.swatchName+"\n",t+="swatchImage: "+e.swatchImage+"\n",t+="swatchUrl: "+e.swatchUrl+"\n",t+="swatchFullUrl: "+e.swatchFullUrl+"\n",t+="sizeId: "+e.sizeId+"\n",t+="sizeValue: "+e.sizeValue+"\n",t+="configId: "+e.configId+"\n",t+="configValue: "+e.configValue+"\n",t+="finishId: "+e.finishId+"\n",t+="finishName: "+e.finishName+"\n",t+="finishImage: "+e.finishImage+"\n",t+="finishUrl: "+e.finishUrl+"\n",t+="finishFullUrl: "+e.finishFullUrl+"\n",t+="offerPrice: "+e.offerPrice+"\n",t+="listPrice: "+e.listPrice+"\n",t+="image: "+e.image+"\n",t+="saleType: "+e.saleType+"\n",alert(t)},testSkus:function(){for(x in this.skuItems)this.testSkuItem(this.skuItems[x])},addNewSkuItem:function(e,t,i,s,n,a){var o=new Object;o.skuId=e,o.partNumber=t,o.thumbnail=a,o.swatchId=null,o.swatchName=null,o.swatchImage=null,o.swatchUrl=null,o.swatchFullUrl=null,o.sizeId=null,o.sizeValue=null,o.configId=null,o.configValue=null,o.finishId=null,o.finishName=null,o.finishImage=null,o.finishUrl=null,o.finishFullUrl=null,o.offerPrice=s,o.listPrice=i,o.image=n,o.height=null,o.length=null,o.width=null,o.weight=null,o.unavailable=null,o.saleType=null,o.onClearance=!1,this.skuItems.push(o)},setSkuSwatch:function(e,t,i,s,n,a){var o=this.getSkuBySkuId(e);o.swatchId=t,o.swatchName=i,o.swatchImage=s,o.swatchUrl=n,o.swatchFullUrl=a},setSkuSize:function(e,t,i){var s=this.getSkuBySkuId(e);s.sizeId=t,s.sizeValue=i},setSkuConfig:function(e,t,i){var s=this.getSkuBySkuId(e);s.configId=t,s.configValue=i},setSkuFinish:function(e,t,i,s,n,a){var o=this.getSkuBySkuId(e);o.finishId=t,o.finishName=i,o.finishImage=s,o.finishUrl=n,o.finishFullUrl=a},setSkuHeight:function(e,t){this.getSkuBySkuId(e).height=t},setSkuLength:function(e,t){this.getSkuBySkuId(e).length=t},setSkuWidth:function(e,t){this.getSkuBySkuId(e).width=t},setSkuWeight:function(e,t){this.getSkuBySkuId(e).weight=t},setSkuUnavailable:function(e,t){this.getSkuBySkuId(e).unavailable=t},setSkuSaleType:function(e,t){var i=this.getSkuBySkuId(e);i.saleType=t,"Clearance"==t&&(i.onClearance=!0)},getSkuBySkuId:function(e){return $.grep(this.skuItems,function(t){return t.skuId==e})[0]},testSwatchList:function(){for(x in this.swatchList)this.testSwatch(this.swatchList[x])},testSwatch:function(e){var t="";t+="swatchId: "+e.swatchId+"\n",t+="swatchName: "+e.swatchName+"\n",t+="swatchImage: "+e.swatchImage+"\n",t+="swatchUrl: "+e.swatchUrl+"\n",t+="swatchFullUrl: "+e.swatchFullUrl+"\n",alert(t)},testSizeConfigList:function(){for(x in this.sizeConfigList)this.testSizeConfig(this.sizeConfigList[x])},testSizeConfig:function(e){var t="";t+="sizeId: "+e.sizeId+"\n",t+="configId: "+e.configId+"\n",t+="sizeConfigId: "+e.sizeConfigId+"\n",t+="sizeConfigValue: "+e.sizeConfigValue+"\n",alert(t)},addToSizeConfigList:function(e,t,i,s){var n=new Object;n.sizeId=e,n.configId=t,n.sizeConfigId=i,n.sizeConfigValue=s,this.sizeConfigList.push(n)},addToSwatchList:function(e,t,i,s,n){var a=new Object;a.swatchId=e,a.swatchName=t,a.swatchImage=i,a.swatchUrl=s,a.swatchFullUrl=n,this.swatchList.push(a)},testSizeList:function(){for(x in this.sizeList)this.testSize(this.sizeList[x])},testSize:function(e){var t="";t+="sizeId: "+e.sizeId+"\n",t+="sizeValue: "+e.sizeValue+"\n",t+="sequence: "+e.sequence+"\n",alert(t)},addToSizeList:function(e,t,i){var s=new Object;s.sizeId=e,s.sizeValue=t,s.sequence=i,this.sizeList.push(s)},testConfigList:function(){for(x in this.configList)this.testConfig(this.configList[x])},testConfig:function(e){var t="";t+="configId: "+e.configId+"\n",t+="configValue: "+e.configValue+"\n",t+="sequence: "+e.sequence+"\n",alert(t)},addToConfigList:function(e,t,i){var s=new Object;s.configId=e,s.configValue=t,s.sequence=i,this.configList.push(s)},testFinishList:function(){for(x in this.finishList)this.testFinish(this.finishList[x])},testFinish:function(e){var t="";t+="finishId: "+e.finishId+"\n",t+="finishName: "+e.finishName+"\n",t+="finishImage: "+e.finishImage+"\n",t+="finishUrl: "+e.finishUrl+"\n",t+="finishFullUrl: "+e.finishFullUrl+"\n",t+="sequence: "+e.sequence+"\n",alert(t)},addToSwatchList:function(e,t,i,s,n){var a=new Object;a.swatchId=e,a.swatchName=t,a.swatchImage=i,a.swatchUrl=s,a.swatchFullUrl=n,this.swatchList.push(a)},addToFinishList:function(e,t,i,s,n,a){var o=new Object;o.finishId=e,o.finishName=t,o.finishImage=i,o.finishUrl=s,o.finishFullUrl=n,o.sequence=a,this.finishList.push(o)},testAltViewList:function(){for(x in this.altViewList)this.testAltView(this.altViewList[x])},testAltView:function(e){var t="";t+="altViewId: "+e.altViewId+"\n",t+="altViewValue: "+e.altViewValue+"\n",alert(t)},addToAltViewList:function(e,t){var i=new Object;i.altViewId=e,i.altViewValue=t,this.altViewList.push(i)},setSelectedSkuItem:function(){var e=this.selectedSkuId;return $.grep(this.skuItems,function(t){return t.skuId==e})[0]},getFormattedSelectedSku:function(){return this.getFormattedSku(this.selectedSkuItem.partNumber)},setSkuDisplay:function(e){$("#skuDisplay").html(this.getFormattedSku(e))},setDisplayDimensions:function(e,t,i,s){null!=e&&"0.0"!=e&&"0"!=e?($("#selectionLength").show(),$("#selectionLength").html(" "+e+" D")):$("#selectionLength").hide(),null!=t&&"0.0"!=t&&"0"!=t?($("#selectionWidth").show(),$("#selectionWidth").html(t+" W x")):$("#selectionWidth").hide(),null!=i&&"0.0"!=i&&"0"!=i?($("#selectionHeight").show(),$("#selectionHeight").html(" "+i+" H x")):$("#selectionHeight").hide(),null!=s&&"0.0"!=s&&"0"!=s?($("#selectionWeight").show(),$("#selectionWeight").html(s+" lbs.")):$("#selectionWeight").hide()},setDisplayPrices:function(e,t){null!=t&&""!=t?$("#offerPrice").text(CommonUtilsJS.formatPrice(t)):$("#offerPrice").html(""),null!=e&&""!=e&&t!=e?$("#listPrice").text(CommonUtilsJS.formatPrice(e)):$("#listPrice").html("")},setMainImage:function(e,t,i,s){var n=e;null!=t&&(n+="&defaultImage="+t+"&"+e.substring(e.indexOf("?")+1)),$(".productMainImageMobile").attr("src",n),this.setMainScene7Image(i,this.selectedSkuItem.onClearance,s)},changeShownInSwatch:function(e,t){$("#selectedSwatch").attr("src",e),$("#selectedSwatchName").html(t),$("#selectedSwatch").attr("alt",t),this.displayShownIn()},changeShownInFinish:function(e,t){$("#selectedFinish").attr("src",e),$("#selectedFinishName").html(t),this.displayShownIn()},getSkuItem:function(e,t,i,s){return $.grep(this.skuItems,function(n){return n.swatchId==e&&n.sizeId==t&&n.configId==i&&n.finishId==s})[0]},filterMatchingItems:function(){var e=this.skuItems,t=this.selectedSkuItem.sizeId;if(this.sizeList.length>0&&(e=this.filterMatchingItemsBySize(t,e)),this.configList.length>0){var i=[];for(x in this.configList)this.filterMatchingItemsByConfig(this.configList[x].configId,e).length>0&&i.push(this.configList[x]);this.disableConfigs(i),e=this.filterMatchingItemsByConfig(this.selectedSkuItem.configId,e)}if(this.finishList.length>0){var s=[];for(x in this.finishList)this.filterMatchingItemsByFinish(this.finishList[x].finishId,e).length>0&&s.push(this.finishList[x]);this.disableFinishes(s),e=this.filterMatchingItemsByFinish(this.selectedSkuItem.finishId,e)}if(this.swatchList.length>0){var n=[];for(x in this.swatchList)this.filterMatchingItemsBySwatch(this.swatchList[x].swatchId,e).length>0&&n.push(this.swatchList[x]);this.disableSwatches(n)}},filterMatchingItemsBySize:function(e,t){return $.grep(t,function(t){return t.sizeId==e})},filterMatchingItemsBySwatch:function(e,t){return $.grep(t,function(t){return t.swatchId==e})},filterMatchingItemsByFinish:function(e,t){return $.grep(t,function(t){return t.finishId==e})},filterMatchingItemsByConfig:function(e,t){return $.grep(t,function(t){return t.configId==e})},disableSwatches:function(e){$(".swatches").css("pointer-events","none"),$(".swatches").hide();for(x in e)$("#swatch_"+e[x].swatchId).css("pointer-events","auto"),$("#swatch_"+e[x].swatchId).show()},naturalSort:function(e,t){var i,s,n,a,o,l,r=0,d=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;if(e==t)return 0;for(i=e.toLowerCase().match(d),s=t.toLowerCase().match(d),l=i.length;r<l;){if(!s[r])return 1;if((n=i[r])!==(a=s[r++]))return o=n-a,isNaN(o)?n>a?1:-1:o}return s[r]?-1:0},sequenceSort:function(e,t,i,s){return e==t?productDisplayJS.naturalSort(e.configValue,t.configValue):e>t?1:-1},disableConfigs:function(e){if(dijit.byId("configurationSelect")){$(".configuration-item.config-item").addClass("hide-item-option"),this.configList.sort(function(e,t){return productDisplayJS.sequenceSort(e.sequence,t.sequence,e.configValue,t.configValue)});for(x in this.configList)null!=dijit.byId("configurationSelect").getOptions(this.configList[x].configId)&&dijit.byId("configurationSelect").removeOption(this.configList[x].configId);for(x in this.configList){var t=!1;for(y in e)this.configList[x].configId==e[y].configId&&(t=!0);var i=null!=this.selectedSkuItem.sizeId?this.selectedSkuItem.sizeId:"",s=null!=this.selectedSkuItem.finishId?this.selectedSkuItem.finishId:"",n=null!=this.selectedSkuItem.swatchId?this.selectedSkuItem.swatchId:"";if(t){var a=dojo.create("option",{label:this.configList[x].configValue,value:this.configList[x].configId});dijit.byId("configurationSelect").addOption(a),$(".configuration-item.config-item.option_"+i+"_"+s+"_"+n+"_"+this.configList[x].configId).removeClass("hide-item-option")}}}},disableFinishes:function(e){$(".finishes").css("pointer-events","none"),$(".finishes").hide();for(x in e)$("#finish_"+e[x].finishId).css("pointer-events","auto"),$("#finish_"+e[x].finishId).show()},orderSizes:function(){dijit.byId("sizeSelect")&&dijit.byId("sizeSelect").set("_onChangeActive",!1),this.sizeList.sort(function(e,t){return productDisplayJS.sequenceSort(e.sequence,t.sequence,e.sizeValue,t.sizeValue)});for(x in this.sizeList)null!=dijit.byId("sizeSelect").getOptions(this.sizeList[x].sizeId)&&dijit.byId("sizeSelect").removeOption(this.sizeList[x].sizeId);for(x in this.sizeList){var e=dojo.create("option",{label:this.sizeList[x].sizeValue,value:this.sizeList[x].sizeId});dijit.byId("sizeSelect").addOption(e)}dijit.byId("sizeSelect")&&(dijit.byId("sizeSelect").setValue(this.selectedSkuItem.sizeId),dijit.byId("sizeSelect").set("_onChangeActive",!0))},displayShownFabric:function(){$(".productMainImageMobile").attr("src",this.selectedSkuItem.swatchFullUrl),this.setMainImage(this.selectedSkuItem.swatchFullUrl,this.selectedSkuItem.swatchImage,this.selectedSkuItem.swatchImage,!1)},displayShownFinish:function(){$(".productMainImageMobile").attr("src",this.selectedSkuItem.finishFullUrl),this.setMainImage(this.selectedSkuItem.finishFullUrl,this.selectedSkuItem.finishImage,this.selectedSkuItem.finishImage,!1)},displayShownIn:function(){$("#shown-in").show()},hideShownIn:function(){$("#shown-in").hide()},changeAltView:function(e,t){this.setMainImage(e,this.selectedSkuItem.swatchImage,t,!1),this.setSelectedSkuToDefault(),this.resetDisplaySkuChanged(!1),this.hideShownIn()},resetAltView:function(e,t){this.setMainImage(e,this.selectedSkuItem.swatchImage,t,!0),this.setSelectedSkuToDefault(),this.resetDisplaySkuChanged(!1),this.displayShownIn()},resetDisplaySkuChanged:function(e){dijit.byId("configurationSelect")&&dijit.byId("configurationSelect").set("_onChangeActive",!1),this.setDisplayDimensions(this.selectedSkuItem.length,this.selectedSkuItem.width,this.selectedSkuItem.height,this.selectedSkuItem.weight),this.setDisplayPrices(this.selectedSkuItem.listPrice,this.selectedSkuItem.offerPrice),this.setSkuDisplay(this.selectedSkuItem.partNumber),this.filterMatchingItems(),null!=this.selectedSkuItem.swatchName?(this.changeShownInSwatch(this.selectedSkuItem.swatchUrl,this.selectedSkuItem.swatchName),e&&this.setMainImage(this.selectedSkuItem.image,this.selectedSkuItem.swatchImage,this.getFormattedSku(this.selectedSkuItem.partNumber),!0)):null!=this.selectedSkuItem.finishName?(this.changeShownInFinish(this.selectedSkuItem.finishUrl,this.selectedSkuItem.finishName),e&&this.setMainImage(this.selectedSkuItem.image,this.selectedSkuItem.finishImage,this.getFormattedSku(this.selectedSkuItem.partNumber),!0)):e&&this.setMainImage(this.selectedSkuItem.image,null,this.getFormattedSku(this.selectedSkuItem.partNumber),!0),dijit.byId("configurationSelect")&&null!=this.selectedSkuItem.configId&&dijit.byId("configurationSelect").setValue(this.selectedSkuItem.configId),null!=this.selectedSkuItem.sizeId&&($(".white-btn.product-size").removeClass("selected-size"),$("#size_"+this.selectedSkuItem.sizeId).addClass("selected-size")),dijit.byId("configurationSelect")&&dijit.byId("configurationSelect").set("_onChangeActive",!0),"true"==this.selectedSkuItem.unavailable?this.disableAddToCart():this.enableAddToCart()},disableAddToCart:function(){$("#addToCart").addClass("inactive-btn"),$("#addToIdeaboard").addClass("inactive-btn")},enableAddToCart:function(){$("#addToCart").removeClass("inactive-btn"),$("#addToIdeaboard").removeClass("inactive-btn")},changeSwatch:function(e){var t=this.getSkuItem(e,this.selectedSkuItem.sizeId,this.selectedSkuItem.configId,this.selectedSkuItem.finishId);this.changeAttribute(t)},getRequestParam:function(e){if(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))return decodeURIComponent(e[1])},initializeSku:function(){var e=this.getRequestParam("swatchId"),t=this.getRequestParam("finishId");if(null!=e)null!=(i=this.getSkuItem(e,this.selectedSkuItem.sizeId,this.selectedSkuItem.configId,this.selectedSkuItem.finishId))?(this.setSelectedSku(i.skuId),this.getFormattedSku(this.selectedSkuItem.partNumber),this.resetDisplaySkuChanged(!1)):(this.getFormattedSku(this.selectedSkuItem.partNumber),this.resetDisplaySkuChanged(!1));else if(null!=t){var i;null!=(i=this.getSkuItem(this.selectedSkuItem.swatchId,this.selectedSkuItem.sizeId,this.selectedSkuItem.configId,t))?(this.setSelectedSku(i.skuId),this.getFormattedSku(this.selectedSkuItem.partNumber),this.resetDisplaySkuChanged(!1)):(this.getFormattedSku(this.selectedSkuItem.partNumber),this.resetDisplaySkuChanged(!1))}else this.getFormattedSku(this.selectedSkuItem.partNumber),this.resetDisplaySkuChanged(!1)},changeConfiguration:function(e){var t=this.getSkuItem(this.selectedSkuItem.swatchId,this.selectedSkuItem.sizeId,e,this.selectedSkuItem.finishId);null==t&&(t=this.getNextSkuItem(this.selectedSkuItem.swatchId,this.selectedSkuItem.sizeId,e,null)),null==t&&(t=this.getNextSkuItem(null,this.selectedSkuItem.sizeId,e,this.selectedSkuItem.finishId)),this.changeAttribute(t)},changeFinish:function(e){var t=this.getSkuItem(this.selectedSkuItem.swatchId,this.selectedSkuItem.sizeId,this.selectedSkuItem.configId,e);null==t&&(t=this.getNextSkuItem(null,this.selectedSkuItem.sizeId,this.selectedSkuItem.configId,e)),this.changeAttribute(t)},changeSize:function(e){var t=this.getSkuItem(this.selectedSkuItem.swatchId,e,this.selectedSkuItem.configId,this.selectedSkuItem.finishId);null==t&&(t=this.getNextSkuItem(this.selectedSkuItem.swatchId,e,null,this.selectedSkuItem.finishId)),null==t&&(t=this.getNextSkuItem(this.selectedSkuItem.swatchId,e,this.selectedSkuItem.configId,null)),null==t&&(t=this.getNextSkuItem(null,e,this.selectedSkuItem.configId,this.selectedSkuItem.finishId)),null==t&&(t=this.getNextSkuItem(null,e,null,this.selectedSkuItem.finishId)),null==t&&(t=this.getNextSkuItem(this.selectedSkuItem.swatchId,e,null,null)),this.changeAttribute(t)},changeMattressSize:function(e){this.changeSizeConfigDisplay(e);var t=this.getSkuItem(this.selectedSkuItem.swatchId,e,this.selectedSkuItem.configId,this.selectedSkuItem.finishId);null==t&&(t=this.getNextSkuItem(this.selectedSkuItem.swatchId,e,null,this.selectedSkuItem.finishId)),null==t&&(t=this.getNextSkuItem(this.selectedSkuItem.swatchId,e,this.selectedSkuItem.configId,null)),null==t&&(t=this.getNextSkuItem(null,e,this.selectedSkuItem.configId,this.selectedSkuItem.finishId)),null==t&&(t=this.getNextSkuItem(null,e,null,this.selectedSkuItem.finishId)),null==t&&(t=this.getNextSkuItem(this.selectedSkuItem.swatchId,e,null,null)),this.changeAttribute(t)},changeSizeConfigDisplay:function(e){$(".configuration-item").hide(),$(".configuration-item").addClass("moreSizes"),$(".configuration-item.size_"+e+".moreSizes").removeClass("moreSizes"),$(".configuration-item.size_"+e).show(),$("#more-sizes").show(),$("#fewer-sizes").hide()},changeAttribute:function(e){null!=e?(this.setSelectedSku(e.skuId),this.resetDisplaySkuChanged(!0)):(MessageHelper.displayStatusMessage(MessageHelper.messages.ITEM_NOT_AVAILABLE_CONFIG),this.resetDisplaySkuChanged(!0))},getNextSkuItem:function(e,t,i,s){return $.grep(this.skuItems,function(n){var a=!0,o=!0,l=!0,r=!0;return null!=e&&(a=n.swatchId==e),null!=t&&(o=n.sizeId==t),null!=s&&(l=n.finishId==s),null!=i&&(r=n.configId==i),a&&o&&l&&r})[0]},validateEmail:function(){return valid=!0,$("#emailInInput").val($("#emailInput").val().trim()),formValidationJS.isEmailValid($("#emailInput").val(),"#emailInput","#emailIn-error")||(valid=!1),valid},submitLO:function(){var e=new Object;e.storeId=this.storeId,e.catalogId=this.catalogId,$("#emailIn-error").hide(),$("#logonPassword-error").hide(),$("#serverValidationError").hide(),productDisplayJS.validateEmail()?$("#logonPassword").val().trim().length<6?$("#logonPassword-error").show():(e.emailIn=$("#emailInput").val().trim(),e.logonPassword=$("#logonPassword").val().trim(),e.reLogonURL=".",e.URL=".",e.returnPage=".",e.fromProductCartPopup=!0,$.ajax({url:"AjaxLogon",data:e,dataType:"html",beforeSend:function(e,t){cursor_wait()},error:function(e,t,i){CommonUtilsJS.showErrorDialog("Sign In Error","Please try again or call 1-888-HAVERTY for assistance.")},success:function(e){try{if(CommonUtilsJS.isSessionExpired(e))return void CommonUtilsJS.redirectToURL(ProductCard_UI.TIMEOUT_URL);var t=JSON.parse(e);if(t.hasOwnProperty("errorMessage"))$("#serverValidationError").html(t.errorMessage).show();else{$(".quickSignIn").hide(),$(".ui-widget-overlay.ui-front").hide();var i=dojo.cookie("userName").toLowerCase();i=i.charAt(0).toUpperCase()+i.slice(1),$("#welcome").text("Welcome, "+i),$("#welcome").show(),$("#myAccountQuickLink").show(),$("#trackOrders").hide(),$("#signOutQuickLink").show(),$("#signInQuickLink").hide(),1==$("#inThisCollectionWidget").length?productDisplayJS.addCollectionToIdeaBoard($("#groupId").text()):productDisplayJS.addItemToIdeaBoard(productDisplayJS.selectedSkuItem.partNumber)}}catch(e){console.log(e),this.error()}},complete:function(e,t){cursor_clear()}})):$("#emailIn-error").show()},submitToRegistration:function(e,t,i){var s;s=1==$("#inThisCollectionWidget").length?"HVTIdeaboardAddGroupCmd?groupId="+$("#groupId").text():"HVTIdeaboardAddItemCmd?partNumber="+this.selectedSkuItem.partNumber,e.returnPage.value=s,e.inStore.value=i,e.href=t,e.submit()},add2IdeaBoard:function(e){"G"==this.userType?displayQuickSignIn():1==$("#inThisCollectionWidget").length?this.addCollectionToIdeaBoard($("#groupId").text()):this.addItemToIdeaBoard(this.selectedSkuItem.partNumber),ProductPageCM("Add to Idea Board")},add2WishListAjax:function(e){var t=[];null!=e?(t.storeId=this.storeId,t.catalogId=this.catalogId,t.langId=this.langId,t.URL="SuccessfulAJAXRequest",t.catEntryId=e,wc.service.invoke("AjaxInterestItemAdd",t),cursor_wait()):alert(this.getErrorMessage("ERR_RESOLVING_SKU"));var i=$("#product-display-name").html();cmCreateElementTag(i,"Idea Board")},addItem2ShopCart:function(){var e=new Object;null!=this.selectedSkuItem.finishId&&(e["Vendor Finish"]=this.selectedSkuItem.finishValue),null!=this.selectedSkuItem.swatchId&&(e["Vendor Color"]=this.selectedSkuItem.swatchName),null!=this.selectedSkuItem.sizeId&&(e.Size=this.selectedSkuItem.sizeValue),null!=this.selectedSkuItem.configId&&(e.Configuration=this.selectedSkuItem.configValue),this.addItem2ShopCartAjax(this.selectedSkuItem.skuId,e,null)},addItem2ShopCartZipCodeError:function(e){var t=new Object;null!=this.selectedSkuItem.finishId&&(t["Vendor Finish"]=this.selectedSkuItem.finishValue),null!=this.selectedSkuItem.swatchId&&(t["Vendor Color"]=this.selectedSkuItem.swatchName),null!=this.selectedSkuItem.sizeId&&(t.Size=this.selectedSkuItem.sizeValue),null!=this.selectedSkuItem.configId&&(t.Configuration=this.selectedSkuItem.configValue),this.addItem2ShopCartAjax(this.selectedSkuItem.skuId,t,e)},addItem2ShopCartFromConfigurations:function(e){this.setSelectedSku(e),this.resetDisplaySkuChanged(!0),this.addItem2ShopCart()},addItem2ShopCartAjax:function(e,t,i){if(!this.loadingshopcart){var s=!1,n=dojo.cookie("zip");if(!isPositiveInteger(1))return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);var a={partNumber:this.selectedSkuItem.partNumber,storeId:this.storeId,langId:this.langId,catalogId:this.catalogId,zipCode:n,catEntryId:e,quantity:1};!n||5==n.length&&null!=n.match(/^[0-9]+$/)&&"00000"!=n||(s=!0),null!=i||s?this.zipCodeErrorPopUp(function(e){e&&(a.zipCode=e.replace(/^\s+|\s+$/g,"")),dojo.cookie("zip",a.zipCode,{path:"/",expires:30}),productDisplayJS.loadingshopcart=!0,productDisplayJS.submitShopCartService(a,productDisplayJS.selectedSkuItem.offerPrice),productDisplayJS.loadingshopcart=!1},function(){productDisplayJS.loadingshopcart=!1},null==i?"Invalid zip code entered. Please try again.":i):null==n||""==n||"00000"==n?this.zipCodePopUp(function(e){e&&(a.zipCode=e.replace(/^\s+|\s+$/g,"")),dojo.cookie("zip",a.zipCode,{path:"/",expires:30}),productDisplayJS.loadingshopcart=!0,productDisplayJS.submitShopCartService(a,productDisplayJS.selectedSkuItem.offerPrice),productDisplayJS.loadingshopcart=!1},function(){productDisplayJS.loadingshopcart=!1}):(this.loadingshopcart=!1,this.submitShopCartService(a,this.selectedSkuItem.offerPrice))}},zipCodePopUp:function(e,t){var i=!1,s="";$("body").append('<style>.ui-dialog { z-index: 99999 !important;</style><div id="zipCodeDialog"></div>'),$("#zipCodeDialog").html("<div id='error'></div>Please enter the zip code of the delivery address below to determine whether Havertys can deliver this item to your area. <input id='ajaxZipCode' type='text' placeholder='Enter zip code' maxlength='14' name='ajaxZipCode' size='15'/>"),$("#zipCodeDialog").dialog({title:"Enter zip code of delivery address",modal:!0,width:"500",height:"auto",buttons:{OK:function(){!(s=$('#zipCodeDialog input[name="ajaxZipCode"]').val())||5!=s.length||isNaN(parseInt(s))||null==s.match(/^[0-9]+$/)||"00000"==s?$("#error").html('<font color="#DB662A">Invalid zip code entered. Please try again.</font>'):($(this).dialog("close"),e(s),i=!0)},Cancel:function(){$(this).dialog("close")}},close:function(){!i&&t&&t(),$("#zipCodeDialog").dialog("destroy"),$("#zipCodeDialog").remove()}}),setTimeout("dojo.byId('ajaxZipCode').focus()",500),setTimeout("dojo.byId('ajaxZipCode').select()",500),$("html, body").animate({scrollTop:$("#zipCodeDialog").offset().top-70},1e3)},zipCodeErrorPopUp:function(e,t,i){var s=!1,n="";$("body").append('<style>.ui-dialog { z-index: 99999 !important;</style><div id="zipCodeDialog"></div>'),$("#zipCodeDialog").html("<div id='error'>").append(i).append("</div>").append("<p>").append("<input id='ajaxZipCode' type='text' placeholder='Enter zip code' maxlength='14' name='ajaxZipCode' size='15'/>"),$("#zipCodeDialog").dialog({title:"ADD TO CART ERROR",modal:!0,width:"500",height:"auto",buttons:{OK:function(){!(n=$('#zipCodeDialog input[name="ajaxZipCode"]').val())||5!=n.length||isNaN(parseInt(n))||null==n.match(/^[0-9]+$/)||"00000"==n?$("#error").html('<font color="#DB662A">Invalid zip code entered. Please try again.</font>'):($(this).dialog("close"),e(n),s=!0)},Cancel:function(){$(this).dialog("close")}},close:function(){!s&&t&&t(),$("#zipCodeDialog").dialog("destroy"),$("#zipCodeDialog").remove()}}),setTimeout("dojo.byId('ajaxZipCode').focus()",500),setTimeout("dojo.byId('ajaxZipCode').select()",500),$("html, body").animate({scrollTop:$("#zipCodeDialog").offset().top-70},1e3)},addedCartPopup:function(e){$("#add2CartPopup").html(e),$("#add2CartPopup").dialog({title:"Successfully Added",modal:!0,height:"auto",buttons:{GoToCart2:{text:"Go to Cart",id:"GotoCartButton2",click:function(){window.location=ProductCard_UI.SHOPPING_CART_URL}}},close:function(){$(this).dialog("close")}}),$(".ui-dialog-titlebar-close").attr("id","MiniShopCartCloseButton_2")},addCollectionToIdeaBoard:function(e){var t=new Object;t.storeId=this.storeId,t.catalogId=this.catalogId,t.groupId=e,$.ajax({url:"HVTIdeaboardAddGroupCmd",data:t,dataType:"html",beforeSend:function(e,t){cursor_wait()},error:function(e,t,i){CommonUtilsJS.showErrorDialog("Add to Idea Board Error","Please try again or call 1-888-HAVERTY for assistance.")},success:function(e){try{if(CommonUtilsJS.isSessionExpired(e))return void CommonUtilsJS.redirectToURL(ProductCard_UI.TIMEOUT_URL);var t=$(e).filter("#CHECKOUTERROR");if(t.length){var i=t.html();CommonUtilsJS.showErrorDialog("Add to Idea Board Error",i)}else MessageHelper.displayStatusMessage("Nice choice! This collection has been added to your Idea Board.")}catch(e){console.log(e),this.error()}},complete:function(e,t){cursor_clear()}})},addItemToIdeaBoard:function(e){var t=new Object;t.storeId=this.storeId,t.catalogId=this.catalogId,t.partNumber=e,t.previousPage="product",$.ajax({url:"HVTIdeaboardAddItemCmd",data:t,dataType:"html",beforeSend:function(e,t){cursor_wait()},error:function(e,t,i){CommonUtilsJS.showErrorDialog("Add to Idea Board Error","Please try again or call 1-888-HAVERTY for assistance.")},success:function(e){try{if(CommonUtilsJS.isSessionExpired(e))return void CommonUtilsJS.redirectToURL(ProductCard_UI.TIMEOUT_URL);var t=$(e).filter("#CHECKOUTERROR");if(t.length){var i=t.html();CommonUtilsJS.showErrorDialog("Add to Idea Board Error",i)}else MessageHelper.displayStatusMessage("Nice choice! This item has been added to your Idea Board.")}catch(e){console.log(e),this.error()}},complete:function(e,t){cursor_clear()}})},testing:function(){alert("TESTING")},submitShopCartService:function(e,t){$.ajax({url:"HVTWorksheetAddCmd",data:e,dataType:"html",beforeSend:function(e,t){cursor_wait()},error:function(e,t,i){CommonUtilsJS.showErrorDialog("Add to Cart Error","Please try again or call 1-888-HAVERTY for assistance.")},success:function(e){try{if(CommonUtilsJS.isSessionExpired(e))return void CommonUtilsJS.redirectToURL(ProductCard_UI.TIMEOUT_URL);var t=$(e).filter("#CHECKOUTERROR");if(t.length){var i=t.html();"We apologize, but this product cannot be delivered to your zip code. Please try another zip code."===i.trim()||"Invalid zip code entered. Please try again."===i.trim()?productDisplayJS.addItem2ShopCartZipCodeError(i.trim()):CommonUtilsJS.showErrorDialog("Add to Cart Error",i)}else{productDisplayJS.addedCartPopup(e);var s=dojo.cookie("cartQuantity");$("#minishopcart_total").html(s)}}catch(e){console.log(e),this.error()}},complete:function(e,t){cursor_clear()}});var i=this.getFormattedSku(this.selectedSkuItem.partNumber);cmCreateShopAction5Tag(this.productPartNumber,this.productName,e.quantity,t,this.category,null,null,null,null,i),cmDisplayShop5s(),document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus()},setProductName:function(e){this.productName=e},setProductThumbnail:function(e){this.productThumbnail=e},setProductPrice:function(e){this.productPrice=e},getFormattedSku:function(e){return e.substring(0,1)+"-"+e.substring(1,5)+"-"+e.substring(5,9)},setSnippetCountryOfOrigin:function(e){$(".acc-section").each(function(){$(this).html($(this).html().replace("#country#",e))})},showMoreSizes:function(){$(".configuration-item.moreSizes").slideDown();var e=$(".configuration-item.moreSizes");e.detach(),$("#product_configuration_list").append(e),$("#more-sizes").hide(),$("#fewer-sizes").show()},hideMoreSizes:function(){$(".configuration-item.moreSizes").slideUp(),$("#more-sizes").show(),$("#fewer-sizes").hide(),$("html, body").animate({scrollTop:$("#product-tabs").offset().top-30},500)},add2CartPopup:function(e,t){$("#add2CartPopup").html(t),$("#add2CartPopup").dialog({title:e,modal:!0,width:"500",height:"auto",buttons:{OK:function(){$(this).dialog("close")}},close:function(){$(this).dialog("close")}})},ajaxAdd2Cart2:function(e,t,i,s){if(!this.loadingshopcart){if(i=i.replace("$",""),!t||isNaN(parseInt(t)))return void productDisplayJS.add2CartPopup("Invalid Quantity","You have entered an invalid quantity. Please update it and re-submit.");var n=dojo.cookie("zip"),a="",o="";null!=s&&s.length>0&&(a="Y",o=s);var l={isMicroD:a,microDSessionId:o,altdel:"N",zipCode:n,partNumber:e,memberId:"*storeOwner",storeId:this.storeId,langId:this.langId,orderId:".",catalogId:this.catalogId,URL:"",errorViewName:"",quantity:t,djcall:"Y"};null==n||""==n||"00000"==n?this.zipCodePopUp(function(e){e&&(l.zipCode=e.replace(/^\s+|\s+$/g,"")),dojo.cookie("zip",l.zipCode,{path:"/",expires:30}),productDisplayJS.loadingshopcart=!0,productDisplayJS.submitShopCartService(l,i),productDisplayJS.loadingshopcart=!1},function(){productDisplayJS.loadingshopcart=!1}):(this.loadingshopcart=!1,this.submitShopCartService(l,i))}},setMainScene7Image:function(e,t,i){i?t?this.basicZoomViewer.setAsset("Havertys/large-template-clearance?&$layer_1_src=Havertys/"+e):this.newProduct?this.basicZoomViewer.setAsset("Havertys/large-template-new?&$layer_1_src=Havertys/"+e):this.basicZoomViewer.setAsset("Havertys/"+e):this.basicZoomViewer.setAsset("Havertys/"+e)},initMainScene7Image:function(e,t,i){$(window).width()>1024&&0==$("#s7viewer_container").length&&(this.basicZoomViewer=null,1==t?(this.newProduct=t,this.basicZoomViewer=new s7viewers.BasicZoomViewer({containerId:"s7viewer",params:{asset:"Havertys/large-template-new?&$layer_1_src=Havertys/"+e,serverurl:"https://havertys.scene7.com/is/image/"}}).init()):this.basicZoomViewer=1==i?new s7viewers.BasicZoomViewer({containerId:"s7viewer",params:{asset:"Havertys/large-template-clearance?&$layer_1_src=Havertys/"+e,serverurl:"https://havertys.scene7.com/is/image/"}}).init():new s7viewers.BasicZoomViewer({containerId:"s7viewer",params:{asset:"Havertys/"+e,serverurl:"https://havertys.scene7.com/is/image/"}}).init(),$("#alternate-images img").each(function(){var e=$(this).attr("data-src");$(this).attr("src",e).show()}))}},require(["dojo/on","dojo/has","dojo/_base/sniff","dojo/domReady!"],function(e,t){t("ie")<9&&e(document,'.compare_target > input[type="checkbox"]:click',function(e){this.blur(),this.focus()})}),$(document).ready(function(){buildDesktopViewer(),buildMobileSlider($)}),$(window).on("resize",function(e){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){buildDesktopViewer(),buildMobileSlider($)},250)});