dojo.require("wc.service.common"),dojo.require("dijit.registry"),shoppingActionsServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(e,r,s){this.langId=e,this.storeId=r,this.catalogId=s}},wc.service.declare({id:"AddOrderItem",actionId:"AddOrderItem",url:"HVTWorksheetAddCmd",formId:"",successHandler:function(e){if(dojo.require("dijit.registry"),MessageHelper.hideAndClearMessage(),cursor_clear(),shoppingActionsJS){r=dojo.query('div[id^="attrValue_"]');if(null!=dojo.query(".definingAttributes")[0])r=dojo.query(".definingAttributes");else if(null!=dojo.query(".product_sizes")[0])r=dojo.query(".product_sizes");else if(null!=dojo.query(".product_info")[0])var r=dojo.query(".product_info");for(var s=new Array,o=0;o<r.length;o++)for(var t=r[o].querySelectorAll(".dijitSelect"),i=0;i<t.length;i++)s=s.concat(t[i]);for(var d=new Array,o=0;o<s.length;o++)d[o]=dijit.registry.byNode(s[o]);for(var a=!0,o=0;o<d.length;o++)d[o].options.length>2&&(a=!1);if(!a){shoppingActionsJS.selectedAttributes=new Object,dojo.topic.publish("DefiningAttributes_Resolved_"+shoppingActionsJS.baseCatalogEntryId,shoppingActionsJS.baseCatalogEntryId,-1);for(o=0;o<d.length;o++)null!=d[o]&&(d[o].value="")}}null!=typeof ShipmodeSelectionExtJS&&"undefined"!=typeof ShipmodeSelectionExtJS&&ShipmodeSelectionExtJS.setOrderItemId(e.orderItemId[0]),dojo.publish("CMAddToCart")},failureHandler:function(e){if(e.errorMessage)if("_ERR_NO_ELIGIBLE_TRADING"==e.errorMessageKey)MessageHelper.displayErrorMessage(storeNLS.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);else if("_ERR_RETRIEVE_PRICE"==e.errorMessageKey){var r=storeNLS.GENERICERR_MAINTEXT;r=dojo.string.substitute(r,{0:storeNLS.GENERICERR_CONTACT_US}),MessageHelper.displayErrorMessage(r)}else MessageHelper.displayErrorMessage(e.errorMessage);else e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}}),wc.service.declare({id:"AddPreConfigurationToCart",actionId:"AddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceAddPreConfigurationToCart",formId:"",successHandler:function(e){if(MessageHelper.hideAndClearMessage(),cursor_clear(),shoppingActionsJS){for(var r=document.getElementsByName("attrValue"),s=!0,o=0;o<r.length;o++)r[o].options.length>1&&(s=!1);if(!s){shoppingActionsJS.selectedAttributes=new Object;for(o=0;o<r.length;o++)null!=r[o]&&(r[o].value="",r[o].onchange())}}null!=typeof ShipmodeSelectionExtJS&&"undefined"!=typeof ShipmodeSelectionExtJS&&ShipmodeSelectionExtJS.setOrderItemId(e.orderItemId[0])},failureHandler:function(e){if(e.errorMessage)if("_ERR_NO_ELIGIBLE_TRADING"==e.errorMessageKey)MessageHelper.displayErrorMessage(storeNLS.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);else if("_ERR_RETRIEVE_PRICE"==e.errorMessageKey){var r=storeNLS.GENERICERR_MAINTEXT;r=dojo.string.substitute(r,{0:storeNLS.GENERICERR_CONTACT_US}),MessageHelper.displayErrorMessage(r)}else MessageHelper.displayErrorMessage(e.errorMessage);else e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey);cursor_clear()}});