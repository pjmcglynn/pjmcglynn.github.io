/***************************************
* @preserve
* ForeSee Client Code: Utils Library
* http://www.answers.com/page/businesssolutions
* Built November 21, 16 17:36:35
* Code version: 19.1.3
* Template version: 19.1.3
***************************************/
("undefined"!=typeof _acsDefine?_acsDefine:define)(["require","_acs","triggerconfig"],function(t,e,config){function i(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i}function n(t,e){return t<<e|t>>>32-e}function r(t,e,r,s,o,a){return i(n(i(i(e,t),i(s,a)),o),r)}function o(t,e,i,n,s,o,a){return r(e&i|~e&n,t,e,s,o,a)}function a(t,e,i,n,s,o,a){return r(e&n|i&~n,t,e,s,o,a)}function c(t,e,i,n,s,o,a){return r(e^i^n,t,e,s,o,a)}function h(t,e,i,n,s,o,a){return r(i^(e|~n),t,e,s,o,a)}function u(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var n,r,s,u,l,f=1732584193,d=-271733879,p=-1732584194,g=271733878;for(n=0;n<t.length;n+=16)r=f,s=d,u=p,l=g,f=o(f,d,p,g,t[n],7,-680876936),g=o(g,f,d,p,t[n+1],12,-389564586),p=o(p,g,f,d,t[n+2],17,606105819),d=o(d,p,g,f,t[n+3],22,-1044525330),f=o(f,d,p,g,t[n+4],7,-176418897),g=o(g,f,d,p,t[n+5],12,1200080426),p=o(p,g,f,d,t[n+6],17,-1473231341),d=o(d,p,g,f,t[n+7],22,-45705983),f=o(f,d,p,g,t[n+8],7,1770035416),g=o(g,f,d,p,t[n+9],12,-1958414417),p=o(p,g,f,d,t[n+10],17,-42063),d=o(d,p,g,f,t[n+11],22,-1990404162),f=o(f,d,p,g,t[n+12],7,1804603682),g=o(g,f,d,p,t[n+13],12,-40341101),p=o(p,g,f,d,t[n+14],17,-1502002290),d=o(d,p,g,f,t[n+15],22,1236535329),f=a(f,d,p,g,t[n+1],5,-165796510),g=a(g,f,d,p,t[n+6],9,-1069501632),p=a(p,g,f,d,t[n+11],14,643717713),d=a(d,p,g,f,t[n],20,-373897302),f=a(f,d,p,g,t[n+5],5,-701558691),g=a(g,f,d,p,t[n+10],9,38016083),p=a(p,g,f,d,t[n+15],14,-660478335),d=a(d,p,g,f,t[n+4],20,-405537848),f=a(f,d,p,g,t[n+9],5,568446438),g=a(g,f,d,p,t[n+14],9,-1019803690),p=a(p,g,f,d,t[n+3],14,-187363961),d=a(d,p,g,f,t[n+8],20,1163531501),f=a(f,d,p,g,t[n+13],5,-1444681467),g=a(g,f,d,p,t[n+2],9,-51403784),p=a(p,g,f,d,t[n+7],14,1735328473),d=a(d,p,g,f,t[n+12],20,-1926607734),f=c(f,d,p,g,t[n+5],4,-378558),g=c(g,f,d,p,t[n+8],11,-2022574463),p=c(p,g,f,d,t[n+11],16,1839030562),d=c(d,p,g,f,t[n+14],23,-35309556),f=c(f,d,p,g,t[n+1],4,-1530992060),g=c(g,f,d,p,t[n+4],11,1272893353),p=c(p,g,f,d,t[n+7],16,-155497632),d=c(d,p,g,f,t[n+10],23,-1094730640),f=c(f,d,p,g,t[n+13],4,681279174),g=c(g,f,d,p,t[n],11,-358537222),p=c(p,g,f,d,t[n+3],16,-722521979),d=c(d,p,g,f,t[n+6],23,76029189),f=c(f,d,p,g,t[n+9],4,-640364487),g=c(g,f,d,p,t[n+12],11,-421815835),p=c(p,g,f,d,t[n+15],16,530742520),d=c(d,p,g,f,t[n+2],23,-995338651),f=h(f,d,p,g,t[n],6,-198630844),g=h(g,f,d,p,t[n+7],10,1126891415),p=h(p,g,f,d,t[n+14],15,-1416354905),d=h(d,p,g,f,t[n+5],21,-57434055),f=h(f,d,p,g,t[n+12],6,1700485571),g=h(g,f,d,p,t[n+3],10,-1894986606),p=h(p,g,f,d,t[n+10],15,-1051523),d=h(d,p,g,f,t[n+1],21,-2054922799),f=h(f,d,p,g,t[n+8],6,1873313359),g=h(g,f,d,p,t[n+15],10,-30611744),p=h(p,g,f,d,t[n+6],15,-1560198380),d=h(d,p,g,f,t[n+13],21,1309151649),f=h(f,d,p,g,t[n+4],6,-145523070),g=h(g,f,d,p,t[n+11],10,-1120210379),p=h(p,g,f,d,t[n+2],15,718787259),d=h(d,p,g,f,t[n+9],21,-343485551),f=i(f,r),d=i(d,s),p=i(p,u),g=i(g,l);return[f,d,p,g]}function f(t){var e,i="";for(e=0;e<32*t.length;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i}function d(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;e<i.length;e+=1)i[e]=0;for(e=0;e<8*t.length;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function p(t){return f(u(d(t),8*t.length))}function g(t,e){var i,n,r=d(t),s=[],o=[];for(s[15]=o[15]=void 0,r.length>16&&(r=u(r,8*t.length)),i=0;i<16;i+=1)s[i]=909522486^r[i],o[i]=1549556828^r[i];return n=u(s.concat(d(e)),512+8*e.length),f(u(o.concat(n),640))}function y(t){var e,i,n="0123456789abcdef",r="";for(i=0;i<t.length;i+=1)e=t.charCodeAt(i),r+=n.charAt(e>>>4&15)+n.charAt(15&e);return r}function m(t){return decodeURIComponent(encodeURIComponent(t))}function v(t){return p(m(t))}function w(t){return y(v(t))}function b(t,e){return g(m(t),m(e))}function _(t,e){return y(b(t,e))}var S={siteKey:"global"};if(e&&e.home&&(e.home.indexOf("production")>-1||e.home.indexOf("staging")>-1)){var x;x=e.home.indexOf("production")>-1?e.home.split("production")[0]:e.home.split("staging")[0],x.indexOf("//")>-1&&(x=x.split("//")[1]),x=x.replace(/\\/g,"/").split("/"),x.length>=3&&(x=x[1].toLowerCase()),x&&x.length>1&&(S.siteKey=x)}S.getSize=function(t){var e=0,i=0,n=t.document,r=n.documentElement;return"number"==typeof t.innerWidth?(e=t.innerWidth,i=t.innerHeight):r&&(r.clientWidth||r.clientHeight)?(e=r.clientWidth,i=r.clientHeight):n.body&&(n.body.clientWidth||n.body.clientHeight)&&(e=n.body.clientWidth,i=n.body.clientHeight),{w:e,h:i}},S.getScroll=function(t){var e=0,i=0,n=t.document,r=n.documentElement;return"number"==typeof t.pageYOffset?(i=t.pageYOffset,e=t.pageXOffset):n.body&&(n.body.scrollLeft||n.body.scrollTop)?(i=n.body.scrollTop,e=n.body.scrollLeft):r&&(r.scrollLeft||r.scrollTop)&&(i=r.scrollTop,e=r.scrollLeft),{x:e,y:i}},S.setScroll=function(t,e,i){t.scrollTo(e,i)},S.getScreenResolution=function(){var t=window.screen;return S.isDefined(t)&&S.isDefined(t.width)&&"number"==typeof t.width?{w:t.width,h:t.height}:{w:0,h:0}},S.getParam=function(t){var e={},i=(location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,i,n){e[i]=n}),e[t]);return i?decodeURIComponent(i):i},S.getFrameWindow=function(t){var e;return t&&t.contentWindow?e=t.contentWindow:t&&t.contentDocument&&t.contentDocument.defaultView&&(e=t.contentDocument.defaultView),e&&e!=e.top?e:null},S.isDefined=function(t){return null!==t&&"undefined"!=typeof t},S.isFunction=function(t){return"function"==typeof t},S.isObject=function(t){return"object"==typeof t},S.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},S.isDate=function(t){return t instanceof Date},S.escapeRegExp=function(t){return(t||"").toString().replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},S.trim=function(t){return(t||"").toString().replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},S.stripHTML=function(t){return(t||"").replace(/(<([^>]+)>)/gi,"")},S.proxy=function(t,e){var i,n,r=Function.prototype.bind,s=Array.prototype.slice;return r&&t.bind===r?r.apply(t,s.call(arguments,1)):(i=s.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(s.call(arguments)));ctor.prototype=t.prototype;var r=ctor();ctor.prototype=null;var o=t.apply(r,i.concat(s.call(arguments)));return Object(o)===o?o:r})},S.superDispose=function(t){if(t){if(t.length)for(var e=t.length-1;e>=0;e--)t[e]=null;for(var i in t){var n=typeof t[i];"function"!=n&&"object"!=n||(t[i]=null)}}t=null},S.ext=function(){var t,e,i,n=arguments,r=n[0]||{},s=1,o=n.length,a=arguments[arguments.length-1]===!1;for("object"==typeof r||S.isFunction(r)||(r={}),o===s&&(r=this,--s);s<o;s++)if(S.isDefined(t=n[s]))for(e in t)i=t[e],r!==i&&void 0!==i&&(S.isArray(i)?i=i.slice(0):S.isDate(i)?i=new Date(i.getTime()):"object"!=typeof i||a||(i=S.ext({},i)),r[e]=i);return r},S.merge=function(){var t,e,i,n,r,s={},o=arguments;for(t=0,e=o.length;t<e;t++)if(r=o[t],S.isPlainObject(r))for(var a in r)i=r[a],n=s[a],s[a]=n&&S.isPlainObject(i)&&S.isPlainObject(n)?S.merge(n,i):S.unlink(i);return s},S.unlink=function(t){var e,i;if(S.isPlainObject(t)){e={};for(var n in t)e[n]=S.unlink(t[n])}else if(S.isArray(t))for(e=[],i=0,l=t.length;i<l;i++)e[i]=S.unlink(t[i]);else e=t;return e},S.isPlainObject=function(t){if(!t||"[object Object]"!==Object.prototype.toString.call(t)||t.nodeType||t.setInterval)return!1;if(t.constructor&&!hasOwnProperty.call(t,"constructor")&&!hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1;var e;for(e in t);return void 0===e||hasOwnProperty.call(t,e)||!hasOwnProperty.call(t,e)&&hasOwnProperty.call(Object.prototype,e)},S.isString=function(t){return"string"==typeof t},S.md5=function(t,e,i){return e?i?b(e,t):_(e,t):i?v(t):w(t)};var O={};S.preventDefault=function(t){t&&t.preventDefault?t.preventDefault():window.event&&window.event.returnValue?window.eventReturnValue=!1:t.returnValue=!1};var E=[],k=function(t){var e="default";if(t.indexOf(":")>-1){var i=t.split(":");e=i[0],t=i[1]}return O[e]||(O[e]={}),O[e][t]||(O[e][t]=[]),{ns:e,en:t}};S.Bind=function(t,e,i,n){if(t&&e){e=e.toLowerCase();var r=k(e);if(O[r.ns][r.en].push({elem:t,cb:i,ub:!!n}),e.indexOf("unload")>-1)return void E.push(i);"propertychange"!=r.en&&t.addEventListener?t.addEventListener(r.en,i,!n):t.attachEvent&&t.attachEvent("on"+r.en,i)}},S.BindOnce=function(t,e,i){if(t&&e){var n=k(e);if(t["_acsEvent"+n.en])return;t["_acsEvent"+n.en]=!0,S.Bind(t,e,i)}};var C=function(t,e,i,n){e&&(e.parentNode||e.window||9==e.nodeType)&&("propertychange"!=t&&e.removeEventListener?e.removeEventListener(t,i,!n):e.detachEvent&&e.detachEvent("on"+t,i))};S.Unbind=function(t,e,i,n){var r,s,o,a;if(e&&e.indexOf("unload")>-1){for(a=0;a<E.length;a++)if(E[a]==i){E.splice(a,1);break}}else if(0===arguments.length)for(var c in O)S.Unbind(c+":*"),delete O[c];else if("string"==typeof t)if(r=k(t),"default"==r.ns){for(var h in O)if(O.hasOwnProperty(h)){s=O[h];for(var u in s)if(s.hasOwnProperty(u)&&(u==r.en||"*"==r.en))for(a=0;a<s[u].length;a++)o=s[u][a],C(u,o.elem,o.cb,o.ub),s[u].splice(a--,1)}}else{s=O[r.ns];for(var l in s)if(s.hasOwnProperty(l)&&(l==r.en||"*"==r.en))for(a=0;a<s[l].length;a++)o=s[l][a],C(l,o.elem,o.cb,o.ub),s[l].splice(a--,1)}else if(t&&!e){for(var f in O)if(O.hasOwnProperty(f)){s=O[f];for(var d in s)if(s.hasOwnProperty(d))for(a=0;a<s[d].length;a++)o=s[d][a],o.elem===t&&(C(d,o.elem,o.cb,o.ub),s[d].splice(a--,1))}}else if(t&&e)if(r=k(e),"default"==r.ns){for(var p in O)if(O.hasOwnProperty(p)){s=O[p];for(var g in s)if(s.hasOwnProperty(g)&&(g==r.en||"*"==r.en))for(a=0;a<s[g].length;a++)o=s[g][a],o.elem===t&&(C(g,o.elem,i?i:o.cb,o.ub),s[g].splice(a--,1))}}else{r=k(e),s=O[r.ns];for(var y in s)if(s.hasOwnProperty(y)&&(y==r.en||"*"==r.en))for(a=0;a<s[y].length;a++)o=s[y][a],o.elem===t&&(C(y,o.elem,i?i:o.cb,o.ub),s[y].splice(a--,1))}};var T=!1;if(S.preventUnloadFlag=!1,S._preventUnloadFor=function(t){T=!0,setTimeout(function(){T=!1},t)},S.HandleUnload=function(){if(!T&&!S.preventUnloadFlag){for(var t=E.length-1;t>=0;t--)try{E[t].call()}catch(t){}S.superDispose(E),S.Unbind()}},document.addEventListener?(window.addEventListener("beforeunload",S.HandleUnload,!0),window.addEventListener("pagehide",S.HandleUnload,!0),document.addEventListener("unload",S.HandleUnload,!0)):document.attachEvent&&window.attachEvent("onunload",S.HandleUnload),S.FSEvent=function(){this.id="_"+Math.round(99999*Math.random()),this.subscriptions=[],this.didFire=!1},S.FSEvent.prototype.subscribe=function(t,e,i){return this.subscriptions.push({once:!!e,cb:t}),i&&this.didFire&&(this.prevArgs?this.fire.apply(this,this.prevArgs):this.fire()),{unsubscribe:function(t,e){return function(){t.unsubscribe(e)}}(this,t)}},S.FSEvent.prototype.unsubscribe=function(t){for(var e=0;e<this.subscriptions.length;e++)this.subscriptions[e].cb==t&&(this.subscriptions.splice(e,1),e--)},S.FSEvent.prototype.unsubscribeAll=function(){this.subscriptions=[]},S.FSEvent.prototype.fire=function(){this.didFire=!0,this.prevArgs=arguments;for(var t=0;t<this.subscriptions.length;t++){var e=this.subscriptions[t];e.once&&this.subscriptions.splice(t--,1),e.cb.apply(this,arguments)}},S.pageNavEvent=new S.FSEvent,S.honorNavigationEvents=!0,history&&history.pushState){window.addEventListener("popstate",function(t){!T&&S.honorNavigationEvents&&S.pageNavEvent.fire()});var I=history.pushState;history.pushState=function(){I.apply(history,arguments),!T&&S.honorNavigationEvents&&S.pageNavEvent.fire()}}S.makeURI=e.makeURI;var B,N=function(t){this.browser=t,this.sig=B||"not detected",this.ready=new S.FSEvent,this._detect()};N.prototype._detect=function(){var t=S.proxy(function(t){this.sig=t,this.ready.fire(t)},this);if(U.has())return void U.uid(t);if(M.has())return void M.uid(t);var e,i=[],n=navigator,r="_fsrFP_",s=this.browser;s.supportsLocalStorage&&(e=localStorage.getItem(r)),!e&&B&&(e=B),e||(i=S.trim(navigator.userAgent.replace(/[0-9\.\/\\\(\);_\-]*/gi,"")).split(" "),i.push(n.language||""),i.push(n.hardwareConcurrency||""),i.push(n.platform||""),i.push(n.vendor||""),i.push(n.appName||""),i.push(n.maxTouchPoints||""),i.push(n.doNotTrack||"false"),i.push(s.os.name||"false"),i.push(s.os.version||"false"),i.push(this._getCanvasPrint()),e=S.md5(i.join("")),this.sig=e,s.supportsLocalStorage&&localStorage.setItem(r,e)),S.nextTick(function(){t(e)})},N.prototype._getCanvasPrint=function(){try{var t=document.createElement("canvas"),e=t.getContext("2d"),i="ForeSee,CloudUser <canvas> 1.0";return t.width=250,t.height=30,e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(i,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(i,4,17),t.toDataURL()}catch(t){return"nocanvas"}},S.Fingerprint=N;var D;S.Frame=function(t){this.frameId="_fsControlFrame";var e=S.makeURI((S.products.foresee?"foresee":"feedback")+"/fs.frame.html?d="+document.domain);t.isIE&&("//"==e.substr(0,2)&&(e="https:"+e),e=e.replace("http:","https:")),this.isSSL=e.toLowerCase().indexOf("https")>-1,this.isSSL&&(e=e.replace(/:[0-9]+/gi,"")),this.iframeSrc=e,D||(D=new S.FSEvent),this.ready=D,this.trackerReady=new S.FSEvent,this._ajaxCalls={},this._ensureFrame(),S.Bind(window,"message",S.proxy(function(t){this._onMessage(t)},this))},S.Frame.prototype._ensureFrame=function(){if(this._iframeElement=document.getElementById(this.frameId),!this._iframeElement){var t=document.createElement("iframe");t.src=this.iframeSrc,t.id=this.frameId,t.className="_FSFRAME_",t._csrf=!0,t.style.display="none",t.setAttribute("title","ForeSee Storage Frame"),t.setAttribute("_fsrB",!0),document&&document.body&&document.body.appendChild(t),this._iframeElement=t,this.ready.didFire&&(this.ready=new S.FSEvent)}},S.Frame.prototype._postMessage=function(t,e){this._ensureFrame();var i=JSON.stringify({src:"fstop",method:t,params:e||{}}),n=S.proxy(function(){this._iframeElement.contentWindow.postMessage(i,"*")},this);this.ready.didFire?n():this.ready.subscribe(n)},S.Frame.prototype._onMessage=function(t){var e;if(t.data&&(t.data+"").indexOf("frame")!=-1){try{e=JSON.parse(t.data)}catch(t){return}if("fsframe"==e.src)switch(this.ready.didFire||this.ready.fire(),e.method){case"ajaxreturn":var i=e.params.params.ajaxid;this._ajaxCalls[i]&&this._ajaxCalls[i].cb&&(this._ajaxCalls[i].cb(!!e.params.success,e.params.res||""),delete this._ajaxCalls[i]);break;case"trackerready":this.trackerReady.didFire||this.trackerReady.fire();break;case"securityerror":this._3pDisabled=__3pDataDisabled=!0}}},S.Frame.prototype.ajax=function(t,e,i,n,r,s){var o="_"+Math.round(99999999*Math.random());return r=!!r,s=s||"application/x-www-form-urlencoded",this._ajaxCalls[o]={payload:{method:t,url:e,data:i,ajaxid:o,skipencode:r,contenttype:s},cb:n},this._postMessage("ajax",this._ajaxCalls[o].payload)},S.Frame.prototype.broadcast=function(t,e,i){return this._postMessage("broadcast",{key:t,value:e,x:i})};var F=function(t){this.browser=t,this.ready=new S.FSEvent,t.isIE&&t.browser.version<11&&"https:"!=location.protocol?(this.fstg=new S.Frame(t),S.nextTick(S.proxy(function(){this.fstg.ready.subscribe(S.proxy(function(){this.ready.fire()},this),!0,!0)},this))):(this.ajax=new S.AjaxTransport,S.nextTick(S.proxy(function(){this.ready.fire()},this)))};F.prototype.send=function(t){this.ready.subscribe(S.proxy(function(){if(this.ajax)this.ajax.send(t);else{var e=S.ext({method:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(){},failure:function(){}},t);this.fstg.ajax(e.method,e.url,e.data,function(t){return function(e,i){e?t.success(i):t.failure(i)}}(e),!0,e.contentType)}},this),!0,!0)},F.prototype.dispose=function(){this.ajax&&this.ajax.dispose()},S.CORS=F,S.INT={},S.AjaxTransport=function(t){var e={method:"POST",data:{},contentType:"application/x-www-form-urlencoded",success:function(){},failure:function(){}};this.options=S.ext(e,t)},S.AjaxTransport.prototype.send=function(t){var e=S.ext({},this.options,t||{});window.XDomainRequest&&window.navigator.userAgent.indexOf("MSIE 10")==-1?this._sendViaXDR(e):window.XMLHttpRequest&&this._sendViaXHR(e),e=null},S.AjaxTransport.prototype.dispose=function(){S.superDispose(this.options)},S.AjaxTransport.isSupported=function(){return!0},S.AjaxTransport.initialize=function(t){t.call(S.AjaxTransport)},S.AjaxTransport.prototype._sendViaXHR=function(t){var e=new window.XMLHttpRequest,i=t.contentType?t.contentType.toLowerCase().indexOf("json")>-1?"application/json; charset=utf-8":t.contentType:"application/x-www-form-urlencoded",n=i.toLowerCase().indexOf("json")>-1,r=n?"GET"==t.method?encodeURIComponent(JSON.stringify(t.data)):JSON.stringify(t.data):S.isDefined(t.skipEncode)&&t.skipEncode===!0?t.data:S.toQueryString(t.data),s=t.url;t.failure=t.failure||function(){},"GET"==t.method&&r&&r.length>0&&(s+=s.indexOf("?")>-1?"&":"?",s+=r);try{e.open(t.method,s,!0)}catch(t){return}e.setRequestHeader("Accept","*/*"),e.setRequestHeader("Content-Type",i),e.timeout=t.timeout||0,e.onreadystatechange=function(t,e){return function(){4==e.readyState&&200==e.status?t.success&&t.success.apply(t,[e.responseText]):4==e.readyState&&200!=e.status&&t.failure&&t.failure.apply(t,[e.responseText])}}(t,e),e.send(r)},S.AjaxTransport.prototype._sendViaXDR=function(t){var e=S.isDefined(t.skipEncode)&&t.skipEncode===!0&&"GET"!==t.method.toUpperCase()?t.data:S.toQueryString(t.data,null,!1),i=t.url;t.failure=t.failure||function(){},"GET"==t.method&&e&&e.length>0&&(e=e.replace("?",""),i+=i.indexOf("?")>-1?"&":"?",i+=e);var n=new window.XDomainRequest;n.onerror=t.failure||function(){},n.ontimeout=t.failure||function(){},n.onprogress=function(){},n.onload=function(t,e){return function(){e.success(t.responseText),t=null,e=null}}(n,t),n.timeout=6e4;try{n.open(t.method,i)}catch(e){return void(t.failure&&t.failure(e))}S.nextTick(function(){e?(S.isString(e)||(e=JSON.stringify(e)),n.send(e)):n.send()})},S.storageTypes={CK:"COOKIE",MC:"MICROCOOKIE",CL:"COOKIELESS",DS:"DOMSTORAGE"},S.persistDataType={GENERAL:"GENERAL",TRACKER:"TRACKER"};var j=function(config,t,e){var i=S.storageTypes;this.cfg=config||{config:{persistence:i.MC}};var n=this.pers=this.cfg.config.persistence.toUpperCase(),r=new Date,s={path:"/",domain:S.getRootDomain(),secure:!1,encode:!0,expires:new Date(r.getFullYear()+20,r.getMonth(),r.getDate()).toGMTString()};S.ext(this,{_storageKey:"_fsspl_",isReady:!1,_healthyServices:["brain"],_lastMaint:S.now(),_lastSave:S.now(),_lastSync:S.now(),defaultExpire:7776e6,ready:new S.FSEvent,onCommit:new S.FSEvent,onSync:new S.FSEvent,trackerReady:new S.FSEvent,maxExpire:-1,_data:{when:S.now(),keys:{}},_keyEvents:{},isStale:!1,_cThreshold:2e3,_updateTimeout:6e4,isSyncing:!1,_serverFails:0}),this.browser=t,t.ready.subscribe(S.proxy(function(){t.supportsLocalStorage||n!=i.DS?t.isMobile&&n==i.CL&&(n=i.MC):n=i.CK,n==i.CK?(this.ckie=new S.Cookie(s),this.fr=new S.Frame(t)):n==i.MC?(this.ckie=new S.Cookie(s),this.uid=e||this.ckie.get(this._storageKey),this.uid&&(this.uid.length>64||this.uid.indexOf("{")>-1)&&(this.uid=S.generateGUID(),this.ckie.set(this._storageKey,this.uid)),this.uid||(this.uid=S.generateGUID(),this.ckie.set(this._storageKey,this.uid)),this.cors=new S.CORS(t)):n==i.CL?(this.uid=e||t.fp,this.cors=new S.CORS(t)):n==i.DS&&(this._cThreshold=500,this._updateTimeout=1e4);var r=this.ckie;r&&(r.kill("fsr.r"),r.kill("fsr.s"),r.kill("fsr.t"),r.kill("acs.t")),this._sync(S.proxy(function(){this.uid||(this.uid=S.generateGUID()),this.get("rid")||this.set("rid",this.uid),this.setUpdateInterval(this._updateTimeout),this.pers!=S.storageTypes.CK&&this.pers!=S.storageTypes.DS||this._maint(!0),this.ready.fire(this)},this))},this),!0,!0),S.Bind(window,"unload",S.proxy(function(){this.save(!0)},this))};j.prototype.watchForChanges=function(t,e,i,n){S.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var s=t[r];this._keyEvents[s]||(this._keyEvents[s]=new S.FSEvent),this._keyEvents[s].subscribe(e,i,n)}},j.prototype.setUpdateInterval=function(t){this._updateTimeout=t,this._updateInterval&&clearInterval(this._updateInterval),this._updateInterval=setInterval(S.proxy(function(){S.now()-this._lastSync>t&&this._sync()},this),Math.min(t/2,5e3))},j.prototype._sync=function(t){if(!this.isSyncing){this.isSyncing=!0,t=t||function(){};var e,i;if(this.pers==S.storageTypes.CK){if(e=this.ckie.get(this._storageKey),e&&e.indexOf("{")>-1)return this._lastSync=S.now(),i=JSON.parse(e),this._fireChangeEvents(i.keys),i.keys=i.keys||{},this._data=i,this.onSync.fire(this),this.isSyncing=!1,void S.nextTick(t);this.isSyncing=!1,S.nextTick(t)}else if(this.pers==S.storageTypes.DS){if(e=localStorage.getItem(this._storageKey)){if(this._lastSync=S.now(),i=JSON.parse(e),i.keys=i.keys||{},this._fireChangeEvents(i.keys),this._data=i,S.nextTick(S.proxy(function(){this.onSync.fire(this)},this)),S.now()-this._data.when<3e5)return this.isSyncing=!1,void S.nextTick(t);this._lastSync=S.now(),this._data={when:S.now(),keys:{}}}this.isSyncing=!1,S.nextTick(t)}else{if(this._serverFails>5)return;S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"GET",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid,success:S.proxy(function(e){this._lastSync=S.now();var i=JSON.parse(e);this._fireChangeEvents(i.keys),this._data=i,this.isSyncing=!1,S.nextTick(S.proxy(function(){this.onSync.fire(this)},this)),t()},this),failure:function(){this._lastSync=S.now(),this.isSyncing=!1,this._serverFails++}})},this))}}},j.prototype._fireChangeEvents=function(t){var e=this;for(var i in t)(!this._data.keys[i]||this._data.keys[i].t<t[i].t)&&(this._keyEvents[i]||(this._keyEvents[i]=new S.FSEvent),S.nextTick(function(i){return function(){e._keyEvents[i].fire(i,e._data.keys[i],t[i].v)}}(i)))},j.prototype.save=function(t){if(t)this._commit();else{var e=S.now();!this._svT&&this.isStale&&(this._svT=setTimeout(S.proxy(this._commit,this),Math.max(0,this._cThreshold-(e-this._lastSave))))}},j.prototype._commit=function(){clearTimeout(this._svT),this._svT=null,this._lastSave=S.now(),this._data.when=this._lastSave;var t="";try{t=JSON.stringify(this._data)}catch(t){return}if(this.pers==S.storageTypes.CK){var e=S.ext({},this._data);for(var i in e.keys)delete e.keys[i].t;t=JSON.stringify(e),this.ckie.set(this._storageKey,t),this.onCommit.fire(this._data)}else if(this.pers==S.storageTypes.DS)localStorage.setItem(this._storageKey,t),this.onCommit.fire(this._data);else{if(this._serverFails>5)return;S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"POST",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid,data:this._data,contentType:"application/json",success:S.proxy(function(t){this._lastSync=S.now(),this._data=JSON.parse(t),this.onCommit.fire(this._data)},this),failure:S.proxy(function(){this._serverFails++},this)})},this))}this.isStale=!1},j.prototype._maint=function(t){var e,i=S.now(),n=this._data.keys,r=!1;if(i-this._lastMaint>5e3||t){for(var s in n)e=n[s],i>e.x&&(delete n[s],r=!0);this._lastMaint=i}!r||this.pers!=S.storageTypes.CK&&this.pers!=S.storageTypes.DS||this._commit()},j.prototype.set=function(t,e,i,n,r,s){this._data.keys||(this._data.keys={});var o=this._data.keys[t],a=S.now(),c=null;if(r||(r=S.persistDataType.GENERAL),i)if("number"==typeof i)c=i,this.maxExpire>0&&this.maxExpire<i&&(c=i=this.maxExpire),i=a+i;else if(i instanceof Date&&(i=i.getTime()+i,this.maxExpire>0)){var h=i-a;h>this.maxExpire&&(c=i=this.maxExpire,i=a+i)}if(this.pers!=S.storageTypes.CK&&this.pers!=S.storageTypes.DS||r!=S.persistDataType.TRACKER){if(o){var u={};u[t]={v:e,x:i||o.x,t:a},this._fireChangeEvents(u),o.v=e,o.x=i||o.x,c&&(o.ttl=c),o.t=a}else{var l={};l[t]={v:e,x:i||this.defaultExpire+a,t:a},c&&(l[t].ttl=c),this._fireChangeEvents(l),this._data.keys[t]=l[t]}this.isStale=!0,s&&this.onCommit.subscribe(s,!0,!1),this._maint(),this.save(!!n)}else this.fr&&this.fr.trackerReady.subscribe(S.proxy(function(){this.fr.broadcast(t,e,i)},this),!0,!0)},j.prototype.get=function(t){if(S.isArray(t)){for(var e={},i=0;i<t.length;i++)e[t[i]]=this.get(t[i]);return e}return this._maint(),this._data.keys||(this._data.keys={}),(this._data.keys[t]||{v:null}).v},j.prototype.erase=function(t,e,i){this._maint(),delete this._data.keys[t],e&&this.onCommit.subscribe(e,!0,!1),this.pers==S.storageTypes.CL||this.pers==S.storageTypes.MC?S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"DELETE",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid+"/"+encodeURIComponent(t),contentType:"application/json",success:S.proxy(function(t){this._lastSync=S.now(),this.onCommit.fire(this._data)},this),failure:S.proxy(function(){this._serverFails++},this)})},this)):this.save(!!i)},j.prototype.reset=function(t){this._data.keys={},t&&this.onCommit.subscribe(t,!0,!1),this.pers==S.storageTypes.CK?(this.ckie.kill(this._storageKey),this.onCommit.fire()):this.pers==S.storageTypes.DS?(localStorage.removeItem(this._storageKey),this.onCommit.fire()):S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"DELETE",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid,success:S.proxy(function(){this._lastSync=S.now()-1e4,this.onCommit.fire()},this),failure:S.proxy(function(){this._serverFails++},this)})},this))},j.prototype.setMaxKeyExpiration=function(t){this.maxExpire=this.defaultExpire=t;var e,i=S.now(),n=this._data.keys;for(var r in n){e=n[r];var s=e.x-i;(s>t||e.ttl>t)&&(e.ttl=t,e.x&&(e.x-=s-t))}this.save(!0)},j.prototype.getMaxKeyExpiration=function(){var t=S.now(),e=this._data.keys,i=0;for(var n in e)i=Math.max(i,e[n].x-t);return i};var L;S.getGlobalStore=function(config,t,e){return L||(L=new j(config,t,e)),L},S.testSameDomain=function(t,e){var i=document.createElement("a");i.href=location.href;var n=i.hostname,r=i.protocol;i.href=t;var s=i.hostname||n,o=0===i.protocol.indexOf("http")?i.protocol:r;i.href=e;var a=i.hostname||n,c=0===i.protocol.indexOf("http")?i.protocol:r;return s.toLowerCase()==a.toLowerCase()&&o.toLowerCase()==c.toLowerCase()},S.addParameterToURL=function(t,e){return t+=(t.split("?")[1]?"&":"?")+e},S.toQueryString=function(t,e){var i,n=S.isDefined(e)?e+(e.indexOf("?")>-1?"&":"?"):"";if(t)for(var r in t)i=t[r],S.isString(i)||(i=JSON.stringify(i)),n+=encodeURIComponent(r)+"="+encodeURIComponent(i)+"&";return n},S.hash=function(t){var e=t.split("_");return 3*e[0]+1357+""+(9*e[1]+58)},S.hashCode=function(t){var e,i=0,n="";if(0===t.length)return i;for(e=0;e<t.length;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i&=i;return i},S.testAgainstSearch=function(t,e){var i,n,r;if(t=t.replace(/^\s+|\s+$/g,"").replace(/[\*]{2,}/g,"*").toLowerCase(),e=e.toLowerCase(),"*"==t)return!0;for(n=[];t.indexOf("*")>-1;)t.indexOf("*")>0&&n.push(t.substr(0,t.indexOf("*"))),n.push("*"),t=t.substr(t.indexOf("*")+1);for(t.length>0&&n.push(t),i=0!==n.length,r=0;r<n.length;r++)if(t=n[r],"*"==t){if(n.length>r+1){if(r++,e.indexOf(n[r])==-1){i=!1;break}e=e.substr(e.indexOf(n[r])+n[r].length)}if(r==n.length-1&&"*"!==n[r]&&e!=n[r]&&e!=n[r]+"/"&&n[r]!=e+"/"&&e.length>0&&"/"!=e){i=!1;break}}else{if(e.substr(0,t.length)!=t&&e!=t+"/"&&t!=e+"/"){i=!1;break}if(e=e.substr(t.length),r==n.length-1&&e.length>0&&"/"!=e){i=!1;break}}return!!i},S.getRootDomain=function(t){t=((t||window.location.hostname)+"").toLowerCase(),t=t.replace("https://","").replace("http://","");var e=t.indexOf("/");if(e>-1&&(t=t.substr(0,e)),e=t.indexOf("?"),e>-1&&(t=t.substr(0,e)),e=t.indexOf(":"),e>-1&&(t=t.substr(0,e)),t.indexOf("localhost")>-1||0===t.replace(/[0-9\.]/g,"").length)return t;var i=t.split("."),n=i.length;return i.length>2&&"co"==i[n-2]?i[n-3]+"."+i[n-2]+"."+i[n-1]:i.length>1?i[n-2]+"."+i[n-1]:t},S.FULL_DAY=864e5,S.now=function(){return+new Date},S.startTime=S.now();var A=function(t,e){this.loadSuccess=new S.FSEvent,this.loadFailure=new S.FSEvent,this.st=document.createElement("script"),this.st.type="text/javascript",this.st.src=t,e&&(this.st.id=e),this.br=new S.Browser,"undefined"!=typeof this.st.addEventListener?this._loadOnOthers():"undefined"!=typeof this.st.attachEvent&&this._loadOnIE()};if(A.prototype._loadOnIE=function(){var t=this,e=this.st;e.onreadystatechange=function(){3==e.readyState&&(e.onreadystatechange=function(){t.loadSuccess.fire(e.src),t.loadFailure=null},t.loadFailure&&t.loadFailure.fire(e.src))},document.body.appendChild(e)},A.prototype._loadOnOthers=function(){this.st.addEventListener("load",S.proxy(function(){this.loadSuccess.fire(this.st.src)},this),!1),this.st.addEventListener("error",S.proxy(function(){this.loadFailure.fire(this.st.src)},this),!1),document.body.appendChild(this.st)},!window.btoa){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=new Array((-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),62,(-1),(-1),(-1),63,52,53,54,55,56,57,58,59,60,61,(-1),(-1),(-1),(-1),(-1),(-1),(-1),0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,(-1),(-1),(-1),(-1),(-1),(-1),26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,(-1),(-1),(-1),(-1),(-1));window.btoa=function(t){var e,i,n,r,s,o;for(n=t.length,i=0,e="";n>i;){if(r=255&t.charCodeAt(i++),i==n){e+=R.charAt(r>>2),e+=R.charAt((3&r)<<4),e+="==";break}if(s=t.charCodeAt(i++),i==n){e+=R.charAt(r>>2),e+=R.charAt((3&r)<<4|(240&s)>>4),e+=R.charAt((15&s)<<2),e+="=";break}o=t.charCodeAt(i++),e+=R.charAt(r>>2),e+=R.charAt((3&r)<<4|(240&s)>>4),e+=R.charAt((15&s)<<2|(192&o)>>6),e+=R.charAt(63&o)}return e},window.atob=function(t){var e,i,n,r,s,o,a;for(o=t.length,s=0,a="";o>s;){do e=P[255&t.charCodeAt(s++)];while(o>s&&-1==e);if(-1==e)break;do i=P[255&t.charCodeAt(s++)];while(o>s&&-1==i);if(-1==i)break;a+=String.fromCharCode(e<<2|(48&i)>>4);do{if(n=255&t.charCodeAt(s++),61==n)return a;n=P[n]}while(o>s&&-1==n);if(-1==n)break;a+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(r=255&t.charCodeAt(s++),61==r)return a;r=P[r]}while(o>s&&-1==r);if(-1==r)break;a+=String.fromCharCode((3&n)<<6|r)}return a}}S.Async=function(t,e,i){this.isParallel=!!t,this._queue=[],this.success=e,this.fail=i,this.isPending=!0},S.Async.prototype.enqueue=function(t){this._queue.push({fn:t,resolved:!1}),(this.isParallel||1==this._queue.length)&&t.apply(this,[{resolve:S.proxy(function(){setTimeout(S.proxy(function(){this.ctx.resolve(this.cb)},this),20)},{cb:t,ctx:this}),error:S.proxy(function(){this.ctx.error(this.cb)},{cb:t,ctx:this})}])},S.Async.prototype.resolve=function(t){if(this.isPending){if(!t)throw new Error("Missing caller argument.");var e,i,n=!1;for(e=0;e<this._queue.length;e++)i=this._queue[e],i.fn===t?i.resolved=!0:i.resolved||(n=!0);if(!this.isParallel&&n){var r;for(e=0;e<this._queue.length;e++)if(i=this._queue[e],i.resolved===!1){r=i;break}if(r)return void r.fn.apply(this,[{resolve:S.proxy(function(){this.ctx.resolve(this.cb)},{cb:r.fn,ctx:this}),error:S.proxy(function(){this.ctx.error(this.cb)},{cb:r.fn,ctx:this})}])}n||(this.isPending=!1,this.success.call(this))}},S.Async.prototype.error=function(){this.isPending=!1,this.fail&&this.fail.call(this)},S.randomRange=function(t,e){return t+Math.random()*(e-t)};var M={_id:"",has:function(){try{return!!(window.s&&S.isFunction(s.c_r)&&s.c_r("s_vi").indexOf("[CE]")>-1)}catch(t){return!1}},uid:function(t){var e=S.nextTick;e(M.has()?function(){t(s.c_r("s_vi").split("|")[1].split("[")[0])}:function(){t()})},beacon:function(){}};S.INT.OM=M,S.imgInfo=function(t,i){var n=function(){};i=i||n;var r=new Image;r.onload=function(){i(r.width,r.height)},r.onerror=function(){},t.indexOf("//")>-1?r.src=t:r.src=e.makeURI("/feedback/"+t),r.width&&(r.onload=r.onerror=n,i(r.width,r.height))},S.getHashParm=function(t){var e=window.location.hash.toString();if(e&&e.length>0)for(var i=e.split("&"),n=0;n<i.length;n++){var r=i[n].split("="),s=r[0].toLowerCase().trim();if(s==t.toLowerCase()){if(r.length>1)return decodeURIComponent(r[1]);break}}},S.nextTick=function(t){setTimeout(t||function(){},0)};var U={has:function(){return"function"==typeof window.ga},uid:function(t){var e=S.nextTick;U.has()?ga(function(i){e(i?function(){t(i.get("clientId"))}:function(){t()})}):e(function(){t()})}};S.INT.GA=U,
S.DomStorage=function(t,e,i,n){this.isLocal=!!i,t||(t="STORAGE"),this.guid="FSR_"+t.replace(/[- _.&]/g,"").toUpperCase(),this.StorageFull=new S.FSEvent,this.storageLimit=45e5,this.kill(),this.sync(),S.isDefined(e)&&!e||setTimeout(S.proxy(function(){S.Bind(window,"unload",S.proxy(function(){this.commit()},this))},this),100)},S.DomStorage.prototype.testStorageLimit=function(){return this.storageBytesObj+this.storageBytesBlob>=this.storageLimit&&(this.StorageFull.fire(this),!0)},S.DomStorage.prototype.dispose=function(t){this._data_obj[t]&&(delete this._data_obj[t],this.storageBytesObj=JSON.stringify(this._data_obj).length)},S.DomStorage.prototype.kill=function(){this.storageBytesObj=0,this.storageBytesBlob=0,this._data_obj={},this._data_blob="",this.isNewStorage=!0},S.DomStorage.prototype.get=function(t){return this._data_obj[t]},S.DomStorage.prototype.getBlob=function(){return this._data_blob},S.DomStorage.prototype.set=function(t,e){e&&(this._data_obj[t]=e,this.storageBytesObj=JSON.stringify(this._data_obj).length,this.isNewStorage=!1,this.testStorageLimit())},S.DomStorage.prototype.setBlob=function(t){this._data_blob=t,this.storageBytesBlob=this._data_blob.length,this.isNewStorage=!1,this.testStorageLimit()},S.DomStorage.prototype.isNew=function(){var t;return window.opener&&!this.get("isNew")&&(t=!0,this.set("isNew",t)),t||this.isNewStorage},S.DomStorage.initialize=function(t){t.apply(S.DomStorage)},S.DomStorage.isSupported=function(){return!!localStorage},S.DomStorage.prototype.sync=function(){var t;try{t=localStorage.getObject(this.guid+"_OBJ"),t&&t.length>0&&(this._data_obj=JSON.parse(t),this.storageBytesObj=t.length,this.isNewStorage=!1)}catch(t){}try{t=localStorage.getObject(this.guid+"_BLOB"),t&&t.length>0&&(this._data_blob=t,this.storageBytesBlob=t.length,this.isNewStorage=!1)}catch(t){}},S.DomStorage.prototype.commit=function(){try{localStorage.setItem(this.guid+"_OBJ",JSON.stringify(this._data_obj)),localStorage.setItem(this.guid+"_BLOB",this._data_blob)}catch(t){}},S.Browser=function(t){var e=this,i=t||navigator.userAgent;S.ext(e,{agent:i,os:{name:"",version:0},browser:{name:"",version:0,actualVersion:0},isMobile:/iphone|ipad|ipod|android|kindle|silk|bntv|nook|blackberry|playbook|mini|windows\sce|windows\sphone|palm|bb10/i.test(i)||!!window.orientation,isTablet:/ipad|playbook|nook|bntv/i.test(i),isWinPhone:/Windows Phone/i.test(i),fp:"",supportsLocalStorage:!1,supportsPostMessage:!!window.postMessage,isIE:!1,isZoomable:!0,supportsSVG:document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),isReady:!1,ready:new S.FSEvent,_internalReady:new S.FSEvent,isIos:!1,servUrl:location.protocol+"//device.4seeresults.com/detect?accessToken="});try{localStorage&&(localStorage.setItem("a","b"),e.supportsLocalStorage=!0)}catch(t){}e._internalReady.subscribe(function(){e.fp=new N(e),e.fp.ready.subscribe(function(){e.fp=e.fp.sig,e.ready.fire(e)},!0,!0)}),e.isMobile&&/iphone|ipad|ipod/i.test(i)&&!e.isWinPhone&&(e.isIos=!0);var n=function(t){return i.toLowerCase().indexOf(t.toLowerCase())>-1},r=function(t,e){return"IE"!=t?e:e>6&&e<10?n("Trident")||7!=e?n("Trident/5.0")&&e<=9?9:n("Trident/4.0")&&e<9?n("WOW64")?8:7==e?e:8:e:7:e},s=function(t,e){return e?n("Windows Phone")?"Winphone":n("iPod")?"iPod":n("iPad")?"iPad":n("iPhone")?"iPhone":(n("blackberry")||n("playbook")||n("BB10"))&&n("applewebkit")?"Blackberry":n("Kindle")||n("Silk")?"Kindle":n("BNTV")||n("Nook")?"Nook":n("Android")?"Android":S.isDefined(window.orientation)?"Mobile":"Other":n("Windows")?"Windows":n("OS X")?"Mac":n("Linux")||n("Googlebot")?"Linux":n("Mac")?"Mac":void 0},o=function(t,e){for(;t>e;)t/=10;return t},a=function(t,e){var i,r,s,a,c,h;return n("windows phone")||!n("ipad")&&!n("iphone")?n("googlebot")?1:n("mac os x")?(i=/OS X ([0-9_]*)/gi.exec(t),r=i[1].split("_"),s=parseInt(r[0]),c=parseInt(r[1]),h=parseInt(r[2]),c+=o(h,1),s+o(c,1)):n("Windows NT")?(i=/Windows NT ([0-9\.]*)/gi.exec(t),r=i[1].split("."),s=parseInt(r[0]),c=parseInt(r[1]),s+o(c,1)):(i=t.match(/Windows Phone OS[\/\s](\d+\.?\d+)/)||t.match(/Windows Phone[\/\s](\d+\.?\d+)/)||t.match(/Android[\/\s](\d+\.?\d+)/),s=S.isDefined(i)?i[1]:1,a=parseFloat(s),!isNaN(a)&&a>0?a:s):(i=/OS ([0-9_]*) like/gi.exec(t),r=i[1].split("_"),s=parseInt(r[0]),c=parseInt(r[1]),s+o(c,1))},c=function(){if("Winphone"!=e.os.name){var t=document.querySelectorAll("head meta[name=viewport],head meta[name=VIEWPORT],head meta[name=Viewport]")||[];if(S.isArray(t)||(t=[t]),t.length>0){for(var i=function(t,e){var i=new RegExp("[\\w\\W]*"+e+"[\\s]*=[\\s]*([^\\s,;]*)[\\w\\W]*","i");return t?t.match(i):null},n=0;n<t.length;n++){var r=t[n].content,s=i(r,"user-scalable"),o=i(r,"initial-scale"),a=i(r,"maximum-scale");if(s&&s.length>1&&("0"==s[1]||"no"==s[1].toLowerCase()))return!1;if(o&&a)return!(o.length>1&&a.length>1&&1==parseFloat(o[1])&&1==parseFloat(a[1]))}return!0}return!0}return!1},h=S._getBrowserNameAndVersion(i),u=function(){e.browser.name=h.name,e.browser.version=h.version,e.browser.actualVersion=r(e.browser.name,e.browser.version),e.os.name=s(i,e.isMobile),e.os.version=a(i,e.isMobile)},l=function(){e.isZoomable=c(),e.isReady=!0,e._internalReady.fire()},f=function(){u()};if(e.isMobile)if(e.isIos||""===e.servUrl||e.isTablet||e.isWinPhone)f(),l();else{var d,p=function(t){var i=JSON.parse(t);e.browser.name=i.browser.name,e.browser.version=e.browser.actualVersion=i.browser.version,e.os.name=i.os.name,e.os.version=i.os.version,e.isMobile=i.isMobile,e.isTablet=i.isTablet,l()},g=this.supportsLocalStorage;if(g&&!t&&(d=sessionStorage.getItem("ACS_BROWSER")),d)p(d);else{var y=function(t){g&&sessionStorage.setItem("ACS_BROWSER",t),p(t)},m=function(){f(),l()},v=function(){var t=new Date,e=t.getFullYear().toString(),i=(t.getMonth()+1).toString(),n=t.getDate().toString();return e+(i[1]?i:"0"+i[0])+(n[1]?n:"0"+n[0])},w=function(){var t=v()+"ForeSee"+(location.origin||"null");return S.hashCode(t)},b={method:"GET",url:e.servUrl+w()+"&ua="+i,type:"*/*",contentType:"application/x-www-form-urlencoded",success:y,failure:m};new S.AjaxTransport(b,(!0)).send()}}else u(),e.isReady=!0,e.isIE="IE"==e.browser.name,e._internalReady.fire()},S._getBrowserNameAndVersion=function(t){var e,i,n="Unknown";return null!==(i=t.match(/Opera[\/\s](\d+\.\d+)/))?n="Opera":null!==(i=t.match(/Edge\/([0-9\.]*)/))?n="IE":null!==(i=t.match(/opr[\/\s](\d+\.\d+)/i))?n="Opera":null!==(i=t.match(/Windows Phone[\/\s](\d+\.\d+)/))?n="IEMobile":null!==(i=t.match(/MSIE (\d+\.\d+)/))?n="IE":null!==(i=t.match(/Navigator[\/\s](\d+\.\d+)/))?n="Netscape":null!==(i=t.match(/Chrome[\/\s](\d+\.\d+)/))?n="Chrome":null!==(i=t.match(/Version\/([0-9\.]*)[\w\W]*Safari/i))?n="Safari":null!==(i=t.match(/Firefox[\/\s](\d+\.\d+)/))?n="Firefox":null!==(i=t.match(/googlebot/gi))?(n="Chrome",e=44):Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject&&(n="IE",e=11),{name:n,version:e||(null!==i?parseFloat(i[1]):void 0)}},S.addClass=function(t,e){var i,n,r,s;for(S.isDefined(t.length)||(t=[t]),i=0,n=t.length;i<n;i++)r=t[i],s=r.className||"",new RegExp("\\b"+e+"\\b").test(s)||(r.className=(""===s?"":s+" ")+e)},S.removeClass=function(t,e){var i,n,r;for(S.isDefined(t.length)||(t=[t]),i=0,n=t.length;i<n;i++)r=t[i],r.className&&(r.className=r.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},S.hasClass=function(t,e){return t.className.indexOf(e)>-1},S.css=function(t,e,i){if(t){S.isDefined(t.length)||(t=[t]);for(var n=0;n<t.length;n++)for(var r in e)r&&("zIndex".indexOf(r)==-1&&"number"==typeof e[r]&&"opacity"!=r&&(e[r]+="px"),i?t[n].style.cssText+=";"+r+":"+e[r]+" !important":t[n].style[r]=e[r])}return t},S.attr=function(t,e){if(t){S.isDefined(t.length)||(t=[t]);for(var i=0;i<t.length;i++)for(var n in e)t[i].setAttribute(n,e[n])}return t},S.restrictFocus=function(t){for(var e=document.querySelectorAll("a, input[type=text], textarea, button, input[type=radio], select, *[tabIndex]",t).sort(function(t,e){return parseInt(t.tabIndex)>parseInt(e.tabIndex)}),i=function(t){return function(e){var i,n;if(9===e.keyCode)for(i=0;i<t.length;i++)if(t[i]===e.target){if(e.preventDefault?e.preventDefault():e.returnValue=!1,n=i,e.shiftKey){do n=0===n?t.length-1:n-1;while((t[n].offsetLeft<=0||t[n].tabIndex<0)&&n!=i)}else do n=(n+1)%t.length;while((t[n].offsetLeft<=0||t[n].tabIndex<0)&&n!=i);t[n].focus();break}}},n=0;n<e.length;n++){var r=e[n];S.Unbind(r,"keydown"),S.Bind(r,"keydown",i(e))}},S.hideAll=function(t){var e,i=document.body.querySelectorAll("*");for(e=0;e<i.length;e++)S.css(i[e],{display:"none"})},S.elindex=function(t){for(var e,i=t.parentNode.childNodes,n=0,r=0;(e=i.item(n++))&&e!=t;)1==e.nodeType&&r++;return r},S.generateGUID=function(){return S.md5(S.now()+""+navigator.userAgent+window.location+(new Date).getTimezoneOffset()+Math.random())},S.Journey=function(){},S.dedupe=function(t){var e,i;for(e=t.length-1;e>=0;e--)for(i=e-1;i>=0;i--)t[i]==t[e]&&t.splice(e,1);return t},S.arrayIndexOf=function(t,e){for(var i in e)if(e[i]===t)return i;return-1},S.inArray=function(t,e){return S.arrayIndexOf(t,e)!=-1};var W,J,G=function(t,e,i){for(var n=[],r=[],s=[],o=0;o<t.length;o++){var a=W.info[t[o]];a&&a.up!==!0?s.push(t[o]):(n.push(S.ext({},a)),r.push(t[o]))}s.length>0?i(s):e(n)};return S.Healthy=function(t,e,i,n){if(S.isArray(e)||(e=[e]),i=i||function(){},n=n||function(){},!W&&t.supportsLocalStorage){var r=localStorage.getItem("_fsrHealthStatus");W=r?JSON.parse(r):{}}W&&W.last&&S.now()-W.last<6e4?S.nextTick(function(){G(e,i,n)}):(J||(J=new F(t)),J.send({method:"GET",url:"https://health.foresee.com",timeout:1e4,failure:S.proxy(function(){n(e)},this),success:S.proxy(function(i){S.isString(i)&&i.length>3?(W={last:S.now(),info:JSON.parse(i)},t.supportsLocalStorage&&localStorage.setItem("_fsrHealthStatus",JSON.stringify(W)),G(e,this.s,this.f)):n(e)},{deps:e,s:i,f:n})}))},S.HealthStatus=function(t,e,i){var n=function(t,e){return function(){for(var e={},n=0;n<t.length;n++){var r={up:!1};W&&W.info&&W.info[t[n]]&&(r=S.ext({},W.info[t[n]])),e[t[n]]=r}i(e)}}(e,i);S.Healthy(t,e,n,n)},S.ImageTransport=function(t){var e={data:{},success:function(){},failure:function(){}};this.options=S.ext(e,t)},S.ImageTransport.prototype.send=function(t){var e=S.ext(this.options,t),i=new Image;i.onerror=e.failure,i.onload=function(){e.success({width:i.width,height:i.height})},i.src=S.toQueryString(e.data,e.url,!1)},window.__fsJSONPCBr={},window.__fsJSONPCB=S.proxy(function(t){if(t){var e=t.filename,i=atob(t.contents);window.__fsJSONPCBr[e]&&window.__fsJSONPCBr[e].fire(i)}},this),S.JSONP=function(t){this._expireTimeout=null,this._networkError=new S.FSEvent,this.opts=S.ext({success:function(){},failure:function(){},timeout:5e3},t)},S.JSONP.prototype.get=function(t,e){var i=t.indexOf("?")>-1?t.substr(t.indexOf("?")+1):"",n=t.substr(0,t.lastIndexOf("/")+1),r=t.substr(t.lastIndexOf("/")+1),s=window.__fsJSONPCBr;this._expireTimeout=setTimeout(S.proxy(function(){this._networkError.fire({type:"timedout"})},this),this.opts.timeout),r.indexOf("?")>-1&&(r=r.substr(0,r.indexOf("?")));var o=(e||"")+r;if(!s[o]){s[o]=new S.FSEvent;var a=n+r.substr(0,r.lastIndexOf("."))+"___"+r.substr(r.lastIndexOf(".")+1)+".js"+(i.length>0?"?"+i:""),c=new A(a,"_fscl"+o);c.loadFailure.subscribe(S.proxy(function(){this.el.parentNode.removeChild(this.el),this.ctx._networkError.fire({type:"internalserror"})},{ctx:this,el:c.st}))}s[o].subscribe(S.proxy(function(t){this.ctx.opts.success(t),clearTimeout(this.ctx._expireTimeout);var e=document.getElementById(this.tgId);e&&e.parentNode.removeChild(e)},{ctx:this,tgId:"_fscl"+o}),!0,!0),this._networkError.subscribe(S.proxy(function(t){this.opts.failure(t),s[o].unsubscribeAll()},this),!0,!0)},S.sign=function(t){var e=(new Date).getTime(),i=t.substr(t.indexOf("/rec/")),n=S.md5((i+e).toString());return t+=t.indexOf("?")==-1?"?":"&",t+"token="+e+"&sig="+encodeURIComponent(n)},S.Cookie=function(t){this.opts=t||{}},S.Cookie.prototype.set=function(t,e,i){var n,r=this.opts;i&&(r=S.ext({},r,i)),e=S.isDefined(r.encode)?encodeURIComponent(e):e,t=encodeURIComponent(t),"localhost"==r.domain&&delete r.domain;for(var s in r)if(r[s])switch(n=r[s],e+=";"+("duration"==s?"expires":s),s){case"expires":e+="="+(S.isDate(n)?n.toGMTString():n)+";";break;case"duration":e+="="+new Date(S.now()+n*S.FULL_DAY).toGMTString()+";";break;default:e+="="+n}document.cookie=t+"="+e},S.Cookie.prototype.get=function(t){var e=document.cookie.match("(?:^|;)\\s*"+S.escapeRegExp(t)+"=([^;]*)");return e?decodeURIComponent(e[1]):null},S.Cookie.prototype.kill=function(t){var e=new Date;e.setTime(e.getTime()-9999),this.set(t,"",{expires:e})},S.CPPS=function(t,e){this.gs=t||S.getGlobalStore(null,e||"foresee"),this.onSet=new S.FSEvent},S.CPPS.prototype={site_id:function(){return this.gs.cfg.config.site_id},set:function(t,e){var i=this.all();i[t]=e+"",this.gs.set("cp",i),this.onSet.fire(t,e)},get:function(t){return this.all()[t]},all:function(){return this.gs.get("cp")||{}},toQueryString:function(){var t=[],e=this.all();for(var i in e)t.push("cpp["+encodeURIComponent(i)+"]="+encodeURIComponent(e[i]));return t.join("&")},erase:function(t){var e=this.all();delete e[t],this.gs.set("cp",e)},save:function(){this.gs.save()},append:function(t,e,i){var n,r,s,o=this.gs.get("cp")||{};o[t]=(o[t]||"")+","+e,i&&(n=o[t].split(","),r=n.length-1,s=n.length>i?n.length-i:0,o[t]=n.splice(s,r-s+1).join()),this.gs.set("cp",o)}},S.WindowStorage=function(t,e,i){t||(t="STORAGE"),this.guid="FSR_"+t.replace(/[- _.&]/g,"").toUpperCase(),this.storageLimit=5e6,this.StorageFull=new S.FSEvent,this.kill(),this.sync(),S.isDefined(e)&&!e||setTimeout(S.proxy(function(){S.Bind(window,"unload",S.proxy(function(){this.commit()},this))},this),100)},S.WindowStorage.prototype.testStorageLimit=function(){return this.storageBytesObj+this.storageBytesBlob>=this.storageLimit&&(this.StorageFull.fire(this),!0)},S.WindowStorage.prototype.dispose=function(t){this._data_obj[t]&&(delete this._data_obj[t],this.storageBytesObj=JSON.stringify(this._data_obj).length)},S.WindowStorage.prototype.kill=function(){this.storageBytesObj=0,this.storageBytesBlob=0,this._data_obj={},this._data_blob="",this.isNewStorage=!0},S.WindowStorage.prototype.get=function(t){return this._data_obj[t]},S.WindowStorage.prototype.getBlob=function(){return this._data_blob},S.WindowStorage.prototype.set=function(t,e){e&&(this._data_obj[t]=e,this.storageBytesObj=JSON.stringify(this._data_obj).length,this.isNewStorage=!1,this.testStorageLimit())},S.WindowStorage.prototype.setBlob=function(t){this._data_blob=t,this.storageBytesBlob=this._data_blob.length,this.isNewStorage=!1,this.testStorageLimit()},S.WindowStorage.prototype.isNew=function(){return this.isNewStorage},S.WindowStorage.initialize=function(t){t.apply(S.WindowStorage)},S.WindowStorage.isSupported=function(){return!0},S.WindowStorage.prototype.sync=function(){var t=S.nameBackup||window.name||"",e=this.guid+"_",i="",n=t.indexOf(e+"BEGIN_OBJ");n>-1&&(i=t.substr(n+(e+"BEGIN_OBJ").length,t.indexOf(e+"END_OBJ")-(n+(e+"BEGIN_OBJ").length)));try{i.length>0&&(this._data_obj=JSON.parse(i),this.storageBytesObj=i.length,this.isNewStorage=!1)}catch(t){}i="",n=t.indexOf(e+"BEGIN_BLOB"),n>-1&&(i=t.substr(n+(e+"BEGIN_BLOB").length,t.indexOf(e+"END_BLOB")-(n+(e+"BEGIN_BLOB").length)));try{i.length>0&&(this._data_blob=i,this.storageBytesBlob=i.length,this.isNewStorage=!1)}catch(t){}},S.WindowStorage.prototype.commit=function(){var t=window.name;S.isDefined(t)||(t="");var e=this.guid+"_",i=t.indexOf(e+"BEGIN_OBJ"),n=JSON.stringify(this._data_obj),r=e+"BEGIN_OBJ"+n+e+"END_OBJ";i>-1?t=t.substr(0,i)+r+t.substr(t.indexOf(e+"END_OBJ")+(e+"END_OBJ").length):t+=r,i=t.indexOf(e+"BEGIN_BLOB"),r=e+"BEGIN_BLOB"+this._data_blob+e+"END_BLOB",i>-1?t=t.substr(0,i)+r+t.substr(t.indexOf(e+"END_BLOB")+(e+"END_BLOB").length):t+=r,window.name=S.nameBackup=t,this.storageBytes=window.name.length},S.nameBackup=window.name,S.products={},S.registerProduct=function(t,e){e=e||{},S.products[t]=e},S});