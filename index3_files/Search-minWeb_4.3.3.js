"undefined"!=typeof SearchJS&&null!=SearchJS&&SearchJS||(SearchJS={autoSuggestTimer:-1,autoSuggestKeystrokeDelay:400,autoSuggestHover:!1,autoSuggestPreviousTerm:"",autoSuggestURL:"",autoSelectOption:-1,historyIndex:-1,retrievedCachedSuggestions:!1,TOTAL_SUGGESTED:4,TOTAL_HISTORY:2,AUTOSUGGEST_THRESHOLD:1,DYNAMIC_AUTOSUGGEST_THRESHOLD:1,CACHED_AUTOSUGGEST_OFFSET:1e3,END_OF_LIST:!1,STATIC_CONTENT_SECTION_DIV:["autoSuggestStatic_1","autoSuggestStatic_2","autoSuggestStatic_3"],staticContentHeaderHistory:"",CachedSuggestionsURL:"",SearchAutoSuggestServletURL:"",searchDepartmentHoverTimeout:"",searchSuggestionHoverTimeout:"",prohibitedCharacters:new RegExp("[\\\\</]","gi"),searchDepartmentSelect:function(e,t){return byId("searchDepartmentLabel").innerHTML=t.innerHTML,byId("search_categoryId").value=e,this.hideSearchDepartmentList(),!1},cancelEvent:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1},searchDepartmentKeyPressed:function(e,t,o,s,i){if(13==e.keyCode)this.searchDepartmentSelect(s,i),null!=(r=document.getElementById("mobileSearchDropdown"))&&"block"==r.style.display?dojo.byId("MobileSimpleSearchForm_SearchTerm").focus():document.CatalogSearchForm.searchTerm.focus();else if(38==e.keyCode)0!=t&&(dojo.byId("searchDepartmentList_"+(t-1)).focus(),this.cancelEvent(e));else if(40==e.keyCode)t!=o&&(dojo.byId("searchDepartmentList_"+(t+1)).focus(),this.cancelEvent(e));else if(27==e.keyCode)null!=(r=document.getElementById("mobileSearchDropdown"))&&"block"==r.style.display?dojo.byId("MobileSimpleSearchForm_SearchTerm").focus():document.CatalogSearchForm.searchTerm.focus(),this.hideSearchDepartmentList();else if(e.shiftKey&&9==e.keyCode){var r=document.getElementById("mobileSearchDropdown");null!=r&&"block"==r.style.display?dojo.byId("MobileSimpleSearchForm_SearchTerm").focus():document.CatalogSearchForm.searchTerm.focus(),this.cancelEvent(e),this.hideSearchDepartmentList()}else 9==e.keyCode&&(dojo.byId("search_submit").focus(),this.cancelEvent(e),this.hideSearchDepartmentList());return!1},hideSearchDepartmentList:function(){byId("searchDepartmentList").style.display="none"},init:function(){dojo.connect(document.CatalogSearchForm.searchTerm,"onfocus",SearchJS,SearchJS._onFocus),dojo.connect(document.CatalogSearchForm.searchTerm,"onblur",SearchJS,SearchJS._onBlur),dojo.connect(document.CatalogSearchForm.searchTerm,"onkeyup",SearchJS,SearchJS._onKeyUp),dojo.connect(document.getElementById("searchDropdown"),"onkeyup",SearchJS,SearchJS._onKeyTab),this.staticContentHeaderHistory=storeNLS.HISTORY},showSearchComponent:function(){var e=document.getElementById("searchDropdown");null!=e&&(e.style.display="block",$("#header-iframe",top.document).css("z-index","100"),$("#header-iframe",top.document).contents().find("#searchBox").attr("target","_parent"))},hideSearchComponent:function(){var e=document.getElementById("searchDropdown");null!=e&&(e.style.display="none",$("#header-iframe",top.document).css("z-index","0"))},_showMobileSearchComponent:function(){var e=document.getElementById("mobileSearchDropdown");null!=e&&("block"==e.style.display?(DepartmentJS.close("mobileSearchDropdown"),e.style.display="none"):(dojo.query(".subDeptDropdown ").forEach(function(e){DepartmentJS.close(e.id)}),DepartmentJS.close("departmentsDropdown"),e.style.display="block"))},setCachedSuggestionsURL:function(e){this.CachedSuggestionsURL=getAbsoluteURL()+e},setAutoSuggestURL:function(e){this.SearchAutoSuggestServletURL=getAbsoluteURL()+e},_onFocus:function(e){this.showSearchComponent(),this.retrieveCachedSuggestions()},_MobileonFocus:function(e){this.showSearchComponent(),this.retrieveCachedSuggestions()},_onBlur:function(e){clearTimeout(this.searchSuggestionHoverTimeout),this.searchSuggestionHoverTimeout=setTimeout("SearchJS.showAutoSuggest(false)",300)},_MobileonBlur:function(e){clearTimeout(this.searchSuggestionHoverTimeout),this.searchSuggestionHoverTimeout=setTimeout("SearchJS.showAutoSuggest(false)",100)},_onKeyPress:function(e){return e.keyCode!=dojo.keys.ENTER},_onKeyUp:function(e){document.getElementById("searchDropdown").style.display="block",this.doAutoSuggest(e,this.SearchAutoSuggestServletURL,document.CatalogSearchForm.searchTerm.value)},_onKeyTab:function(e){"9"!=e.keyCode&&"9"!=e.which||dojo.byId("searchFilterButton").focus()},_MobileonKeyUp:function(e){document.getElementById("mobileSearchDropdown").style.display="block",this.doAutoSuggest(e,this.SearchAutoSuggestServletURL,dojo.byId("MobileSimpleSearchForm_SearchTerm").value)},_handleEnterKey:function(){document.CatalogSearchForm.searchTerm.value=trim(document.CatalogSearchForm.searchTerm.value.replace(SearchJS.prohibitedCharacters,"")),document.CatalogSearchForm.searchTerm.value.length>0&&(this.END_OF_LIST?this.gotoAdvancedSearch(byId("advancedSearch").href):""!=this.autoSuggestURL?document.location.href=this.autoSuggestURL:(document.CatalogSearchForm.searchTerm.value=trim(document.CatalogSearchForm.searchTerm.value),submitSpecifiedForm(document.CatalogSearchForm)))},_onClick:function(e){return document.CatalogSearchForm.searchTerm.value=trim(document.CatalogSearchForm.searchTerm.value),document.CatalogSearchForm.searchTerm.value.length>0&&("undefined"!=typeof TealeafWCJS&&TealeafWCJS.processDOMEvent(e),submitSpecifiedForm(document.CatalogSearchForm)),!1},_MobileonClick:function(e){return document.MobileCatalogSearchForm.searchTerm.value=trim(document.MobileCatalogSearchForm.searchTerm.value),document.MobileCatalogSearchForm.searchTerm.value.length>0&&("undefined"!=typeof TealeafWCJS&&TealeafWCJS.processDOMEvent(e),submitSpecifiedForm(document.MobileCatalogSearchForm)),!1},doDynamicAutoSuggest:function(e,t,o){-1!=this.autoSuggestTimer&&(clearTimeout(this.autoSuggestTimer),this.autoSuggestTimer=-1),this.autoSuggestTimer=setTimeout(function(){wc.render.getRefreshControllerById("AutoSuggestDisplayController").url=e+"&term="+encodeURIComponent(t)+"&showHeader="+o,console.debug("update autosuggest "+e),wc.render.updateContext("AutoSuggest_Context",{}),this.autoSuggestTimer=-1},this.autoSuggestKeystrokeDelay)},gotoAdvancedSearch:function(e){var t=byId("SimpleSearchForm_SearchTerm").value;document.location.href=e+"&searchTerm="+t},selectAutoSuggest:function(e){var t=document.getElementById("mobileSearchDropdown");if(null!=t&&"block"==t.style.display)o=document.getElementById("MobileSimpleSearchForm_SearchTerm");else var o=document.CatalogSearchForm.searchTerm;o.value=e,o.focus(),this.autoSuggestPreviousTerm=e,"undefined"!=typeof TealeafWCJS&&TealeafWCJS.createExplicitChangeEvent(o),submitSpecifiedForm(document.CatalogSearchForm)},showAutoSuggest:function(e){var t=document.getElementById("autoSuggest_Result_div");if(dojo.isIE<7)var o=document.getElementById("autoSuggest_content_div"),s=document.getElementById("autoSuggestDropDownIFrame");null!=t&&"undefined"!=t&&(e?($("#autoSuggest_Result_div").show(),$("#header-iframe",top.document).css("z-index","100"),$("#header-iframe",top.document).contents().find("#searchBox").attr("target","_parent"),dojo.isIE<7&&(s.style.height=o.scrollHeight,s.style.display="block")):(dojo.isIE<7&&(s.style.display="none",s.style.height=0),$("#autoSuggest_Result_div").hide(),$("#widget_minishopcart").hasClass("selected")||$("#header-iframe",top.document).css("z-index","0")))},showAutoSuggestIfResults:function(){var e=document.getElementById("mobileSearchDropdown");"undefined"!=typeof staticContent&&""==document.getElementById(this.STATIC_CONTENT_SECTION_DIV[0]).innerHTML&&""==document.getElementById("autoSuggestHistory").innerHTML&&null==document.getElementById("dynamicAutoSuggestTotalResults")?this.showAutoSuggest(!1):null!=e&&"block"==e.style.display?document.getElementById("MobileSimpleSearchForm_SearchTerm").value.length<=this.AUTOSUGGEST_THRESHOLD?this.showAutoSuggest(!1):this.showAutoSuggest(!0):document.CatalogSearchForm.searchTerm.value.length<=this.AUTOSUGGEST_THRESHOLD?this.showAutoSuggest(!1):this.showAutoSuggest(!0)},highLightSelection:function(e,t){var o=document.getElementById("autoSelectOption_"+t);if(null!=o&&"undefined"!=o){if(e){o.className="autoSuggestSelected";var s=document.getElementById("mobileSearchDropdown");if(null!=s&&"block"==s.style.display)i=document.getElementById("MobileSimpleSearchForm_SearchTerm");else var i=document.CatalogSearchForm.searchTerm;i.setAttribute("aria-activedescendant","suggestionItem_"+t);var r=document.getElementById("dynamicAutoSuggestTotalResults");null!=r&&"undefined"!=r&&t<r.value||t>=this.historyIndex?(i.value=o.title,this.autoSuggestPreviousTerm=o.title,this.autoSuggestURL=""):this.autoSuggestURL=o.href}else o.className="";return!0}return!1},enableAutoSelect:function(e){this.highLightSelection(!1,this.autoSelectOption),document.getElementById("autoSelectOption_"+e).className="autoSuggestSelected",this.autoSelectOption=e},resetAutoSuggestKeyword:function(){var e=document.getElementById("autoSuggestOriginalTerm");if(null!=e&&"undefined"!=e){var t=document.getElementById("mobileSearchDropdown");if(null!=t&&"block"==t.style.display)o=document.getElementById("MobileSimpleSearchForm_SearchTerm");else var o=document.CatalogSearchForm.searchTerm;o.value=e.value,this.autoSuggestPreviousTerm=e.value}},clearAutoSuggestResults:function(){for(var e=0;e<staticContent.length;e++)document.getElementById(this.STATIC_CONTENT_SECTION_DIV[e]).innerHTML="";this.autoSuggestPreviousTerm="",this.autoSuggestURL="",document.getElementById("autoSuggestDynamic_Result_div").innerHTML="",this.showAutoSuggest(!1),$("#header-iframe",top.document).css("z-index","0")},doAutoSuggest:function(e,t,o){if(o.length<=this.AUTOSUGGEST_THRESHOLD&&this.showAutoSuggest(!1),e.keyCode!=dojo.keys.ENTER)if(e.keyCode!=dojo.keys.TAB)if(e.keyCode!=dojo.keys.ESCAPE)if(e.keyCode!=dojo.keys.UP_ARROW){if(e.keyCode!=dojo.keys.DOWN_ARROW){if(!(o.length>this.AUTOSUGGEST_THRESHOLD&&o==this.autoSuggestPreviousTerm||(this.autoSuggestPreviousTerm=o,o.length<=this.AUTOSUGGEST_THRESHOLD)))if(-1!=this.autoSuggestTimer&&(clearTimeout(this.autoSuggestTimer),this.autoSuggestTimer=-1),""!=o){this.autoSelectOption=-1;this.doStaticAutoSuggest(o);if(o.length>this.DYNAMIC_AUTOSUGGEST_THRESHOLD){this.doDynamicAutoSuggest(t,o,!0)}else document.getElementById("autoSuggestDynamic_Result_div").innerHTML=""}else this.clearAutoSuggestResults()}else if(this.highLightSelection(!0,this.autoSelectOption+1))this.highLightSelection(!1,this.autoSelectOption),this.autoSelectOption++;else if(this.autoSelectOption<this.CACHED_AUTOSUGGEST_OFFSET&&this.highLightSelection(!0,this.CACHED_AUTOSUGGEST_OFFSET))this.highLightSelection(!1,this.autoSelectOption),this.autoSelectOption=this.CACHED_AUTOSUGGEST_OFFSET,this.resetAutoSuggestKeyword();else if(!this.END_OF_LIST){dojo.addClass("autoSuggestAdvancedSearch","autoSuggestSelected"),this.highLightSelection(!1,this.autoSelectOption),this.autoSelectOption++,this.END_OF_LIST=!0;var s=document.getElementById("mobileSearchDropdown");if(null!=s&&"block"==s.style.display)i=document.getElementById("MobileSimpleSearchForm_SearchTerm");else var i=document.CatalogSearchForm.searchTerm;i.setAttribute("aria-activedescendant","advancedSearch")}}else{var r=document.getElementById("dynamicAutoSuggestTotalResults");if(this.END_OF_LIST)dojo.removeClass("autoSuggestAdvancedSearch","autoSuggestSelected"),this.END_OF_LIST=!1,this.autoSelectOption--,this.highLightSelection(!0,this.autoSelectOption)||this.autoSelectOption==this.CACHED_AUTOSUGGEST_OFFSET&&null!=r&&"undefined"!=r&&(this.autoSelectOption=r.value-1,this.highLightSelection(!0,this.autoSelectOption));else if(this.highLightSelection(!0,this.autoSelectOption-1))this.highLightSelection(!1,this.autoSelectOption),this.autoSelectOption==this.historyIndex&&this.resetAutoSuggestKeyword(),this.autoSelectOption--;else if(this.autoSelectOption==this.CACHED_AUTOSUGGEST_OFFSET&&null!=r&&"undefined"!=r)this.highLightSelection(!1,this.CACHED_AUTOSUGGEST_OFFSET),this.autoSelectOption=r.value-1,this.highLightSelection(!0,this.autoSelectOption);else{this.highLightSelection(!1,this.autoSelectOption),this.autoSelectOption=-1;document.getElementById("autoSuggestOriginalTerm");this.resetAutoSuggestKeyword()}}else this.showAutoSuggest(!1);else this.autoSuggestHover=!0;else this._handleEnterKey()},tokenizeForBidi:function(e,t,o,s){var r=e.split(" > "),a="",n="";if(r.length>0){for(a+="<div class='category_list'>",i=0;i<r.length;i++){if(0!=i&&(a+="<span class='gt'>&nbsp; > &nbsp;</span>"),i==r.length-1){var u=t.toLowerCase().indexOf(s);n=t.substr(0,u)+("<span class='highlight'>"+o+"</span>")+t.substr(u+o.length)}else n=r[i];a+=n}a+="</div>"}return a},doStaticAutoSuggest:function(e){for(var t=["","","","","",""],o=0,s=e.toLowerCase(),i=this.CACHED_AUTOSUGGEST_OFFSET,r="<div class='list_section'><div",a=0;a<staticContent.length;a++)for(var n=0,u=0;u<staticContent[a].length;u++){var c=staticContent[a][u][0],l=staticContent[a][u][1],h=staticContent[a][u][2];if(-1!=c.toLowerCase().indexOf(s)){var d=this.tokenizeForBidi(h,c,e,s);if(t[a]=t[a]+"<ul class='autoSuggestDivNestedList'><li id='suggestionItem_"+i+"' role='listitem' tabindex='-1'><a id='autoSelectOption_"+i+"' title='"+c+"' onmouseout='this.className=\"\"; this.autoSuggestURL=\"\";' onclick='SearchJS.hideSearchComponent();' onmouseover='SearchJS.enableAutoSelect("+i+"); this.autoSuggestURL=this.href;' href=\""+l+'">'+d+"</a></li></ul>",n++,i++,n>=this.TOTAL_SUGGESTED)break}}for(a=0;a<staticContent.length;a++)if(document.getElementById(this.STATIC_CONTENT_SECTION_DIV[a]).innerHTML="",""!=t[a]){v="<ul class='autoSuggestDivNestedList'><li class='heading'><span>"+staticContentHeaders[a]+"</span></li></ul>";document.getElementById(this.STATIC_CONTENT_SECTION_DIV[o]).innerHTML=v+r+" role='list' title='"+staticContentHeaders[a]+"' aria-label='"+staticContentHeaders[a]+"'>"+t[a]+"</div></div>",o++}var g="",S=document.getElementById("autoSuggestHistory");S.innerHTML="";var m=new Array;this.historyIndex=i;var T=getCookie("searchTermHistory");if(void 0!==T)for(var p=T.split("|"),n=0,a=p.length-1;a>0;a--){var y=p[a],f=y.toLowerCase();if(f.match("^"+s)==s){for(var C=!1,u=0;u<m.length;u++)if(m[u]==f){C=!0;break}if(!C&&(g=g+"<ul class='autoSuggestDivNestedList'><li id='suggestionItem_"+i+"' role='listitem' tabindex='-1'><a href='#' onmouseout='this.className=\"\"' onmouseover='SearchJS.enableAutoSelect("+i+");' onclick='SearchJS.selectAutoSuggest(this.title);' title='"+y+"' id='autoSelectOption_"+i+"'><strong>"+e+"</strong>"+y.substring(e.length,y.length)+"</a></li></ul>",m.push(f),n++,i++,n>=this.TOTAL_HISTORY))break}}if(""!=g){var v="<ul class='autoSuggestDivNestedList'><li class='heading'><span>"+this.staticContentHeaderHistory+"</span></li></ul>";S.innerHTML=v+r+" title='"+this.staticContentHeaderHistory+"'>"+g+"</div></div>",o++}return o>0&&(this.showAutoSuggest(!0),!0)},retrieveCachedSuggestions:function(){this.retrievedCachedSuggestions||(wc.render.getRefreshControllerById("AutoSuggestCachedSuggestionsController").url=this.CachedSuggestionsURL,console.debug("update cache sugg "+this.CachedSuggestionsURL),wc.render.updateContext("CachedSuggestions_Context",{}))},updateSearchTermHistoryCookie:function(e){var t="|"+e;void 0!==getCookie("searchTermHistory")&&(t=dojo.cookie("searchTermHistory")+t),dojo.cookie("searchTermHistory",t,{path:"/"})},updateSearchTermHistoryCookieAndRedirect:function(e,t){this.updateSearchTermHistoryCookie(e),document.location.href=t},isValidNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)&&e>=0},validateForm:function(e){e.minPrice.value=trim(e.minPrice.value),e.maxPrice.value=trim(e.maxPrice.value);var t=e.minPrice.value,o=e.maxPrice.value,s=this.isValidNumber(t),i=this.isValidNumber(o);if(t.length>0&&!s)return MessageHelper.formErrorHandleClient(e.minPrice.id,MessageHelper.messages.EDPPaymentMethods_AMOUNT_NAN),!1;if(o.length>0&&!i)return MessageHelper.formErrorHandleClient(e.maxPrice.id,MessageHelper.messages.EDPPaymentMethods_AMOUNT_NAN),!1;if(t.length>0&&o.length>0&&parseFloat(t)>parseFloat(o))return MessageHelper.formErrorHandleClient(e.maxPrice.id,MessageHelper.messages.ERROR_PRICE_RANGE),!1;e.searchTerm.value=trim(e.searchTerm.value),e.filterTerm.value=trim(e.filterTerm.value);var r=e.searchTerm.value,a=e.filterTerm.value;if(0==r.length&&0==a.length&&0==manufacturer.length)return MessageHelper.formErrorHandleClient(e.searchTerm.id,MessageHelper.messages.ERROR_EMPTY_SEARCH_FIELDS),!1;e.submit()}},wc.render.declareContext("AutoSuggest_Context",null,""),wc.render.declareContext("CachedSuggestions_Context",null,""),wc.render.declareRefreshController({id:"AutoSuggestCachedSuggestionsController",renderContext:wc.render.getContextById("CachedSuggestions_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext;var t=document.getElementById("cachedSuggestions");if(null==t)document.getElementById("autoSuggestCachedSuggestions_div").innerHTML="";else{for(var o=t.getElementsByTagName("script"),s=o.length,i=0;i<s;i++){var r=document.createElement("script");r.type="text/javascript",r.text=o[i].text,document.getElementById("autoSuggestCachedSuggestions_div").appendChild(r)}SearchJS.retrievedCachedSuggestions=!0;var a=document.getElementById("mobileSearchDropdown");null!=a&&"block"==a.style.display?searchTerm=document.getElementById("MobileSimpleSearchForm_SearchTerm").value:searchTerm=document.CatalogSearchForm.searchTerm.value,searchTerm.length>SearchJS.AUTOSUGGEST_THRESHOLD&&SearchJS.doStaticAutoSuggest(searchTerm)}}}),wc.render.declareRefreshController({id:"AutoSuggestDisplayController",renderContext:wc.render.getContextById("AutoSuggest_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var o=this.renderContext;t.refresh(o.properties)},postRefreshHandler:function(e){this.renderContext;null==document.getElementById("suggestedKeywordResults")&&(document.getElementById("autoSuggestDynamic_Result_div").innerHTML=""),SearchJS.showAutoSuggestIfResults()}}));