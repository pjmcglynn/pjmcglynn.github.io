require(["dojo/_base/event","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/has","dojo/on","dojo/query","dojo/_base/sniff","dojo/domReady!","dojo/NodeList-dom","dojo/NodeList-traverse"],function(e,t,n,a,o,d,i){var r={};activate=function(e){var t="departmentMenu_"==e.id.slice(0,"departmentMenu_".length);if("true"==this.ajaxRefresh&&t)return setAjaxRefresh(""),wc.render.updateContext("departmentSubMenuContext",{targetId:e.id}),void("function"==typeof cX&&setTimeout(function(){cX("")},1e3));var a=e.getAttribute("data-parent");a&&r[a]&&deactivate(r[a]),a&&activate(document.getElementById(a)),n.add(e,"active"),$("#header-iframe",top.document).css("z-index","100"),i("a[data-activate='"+e.id+"']").addClass("selected"),i("a[data-toggle='"+e.id+"']").addClass("selected"),r[a]=e},deactivate=function(e){r[e.id]&&deactivate(r[e.id]),n.remove(e,"active"),$("#header-iframe",top.document).css("z-index","0"),i("a[data-activate='"+e.id+"']").removeClass("selected"),i("a[data-toggle='"+e.id+"']").removeClass("selected");var t=e.getAttribute("data-parent");delete r[t]},toggle=function(e){n.contains(e,"active")?deactivate(e):activate(e)},setUpEventActions=function(){d(document,"a[data-activate]:click",function(t){var n=this.getAttribute("data-activate");activate(document.getElementById(n)),e.stop(t)}),d(document,"a[data-deactivate]:click",function(t){var n=this.getAttribute("data-deactivate");deactivate(document.getElementById(n)),e.stop(t)}),d(document,"a[data-toggle]:click",function(t){var n=this.getAttribute("data-toggle");toggle(document.getElementById(n)),e.stop(t)}),d(document,"a[data-toggle]:keydown",function(t){if(27==t.keyCode){n=this.getAttribute("data-toggle");deactivate(document.getElementById(n)),e.stop(t)}else if(40==t.keyCode){var n=this.getAttribute("data-toggle"),a=document.getElementById(n);activate(a),i('[class*="menuLink"]',a)[0].focus(),e.stop(t)}}),o("ie")<10&&i("input[placeholder]").forEach(function(e){var t=e.getAttribute("placeholder");if(t){var n=document.createElement("label");n.className="placeholder",n.innerHTML=t,e.parentNode.insertBefore(n,e);var a=function(){n.style.display=e.value?"none":"block"};window.setTimeout(a,200),d(e,"blur, focus, keyup",a),d(n,"click",function(t){e.focus()})}})},setUpEventActions(),window.setTimeout(function(){var t=document.getElementById("searchFilterButton");t&&d(t,"keydown",function(e){(9==e.keyCode||9==e.keyCode&&e.shiftKey)&&deactivate(document.getElementById(t.getAttribute("data-toggle")))});var n=document.getElementById("SimpleSearchForm_SearchTerm");n&&d(n,"click",function(e){i('.selected:not(a[data-toggle="searchBar"])',document.getElementById("header")).forEach(function(e,t){deactivate(document.getElementById(e.getAttribute("data-toggle")))})});var a=document.getElementById("searchFilterMenu");if(a){var o=i('[class*="menuLink"]',a);o.forEach(function(t,n){d(t,"keydown",function(t){27==t.keyCode?(deactivate(a),e.stop(t)):9==t.keyCode||9==t.keyCode&&t.shiftKey?deactivate(a):38==t.keyCode?(o[0==n?o.length-1:n-1].focus(),e.stop(t)):40==t.keyCode&&(o[(n+1)%o.length].focus(),e.stop(t))})})}},100);var c=document.getElementById("header");a.getComputedStyle(c).direction;updateQuickLinksBar=function(){document.getElementById("logo");var e,t=document.getElementById("quickLinksBar"),a=document.getElementById("facebookQuickLinkItem");a&&a.parentNode!=t&&e>1024?t.insertBefore(a,t.firstChild):a&&a.parentNode==t&&e<=1024&&i("#quickLinksMenu > ul")[0].appendChild(a);var o=i("#quickLinks > li"),d=o[o.length-2],r=o[o.length-1];e-=d.offsetWidth+r.offsetWidth;for(var c=o.length-3;c>=0;c--)e-=o[c].offsetWidth,n.toggle(o[c],"border-right",e>=0),n.toggle(o[c],"hidden",e<0)},window.setTimeout(updateQuickLinksBar,200),d(window,"resize",updateQuickLinksBar),updateDepartmentsMenu=function(){document.getElementById("departmentsMenu"),document.getElementById("searchBar");for(var t=i(".departmentButton"),a=i(".departmentMenu"),o=i("#departmentsMenu > li"),r=(o[o.length-1],null),c=0;c<o.length-1;c++)r-=o[c].offsetWidth,n.toggle(o[c],"hidden",r<0);t.forEach(function(e,t){d(e,"keydown",function(t){(9==t.keyCode||9==t.keyCode&&t.shiftKey)&&deactivate(document.getElementById(e.getAttribute("data-toggle")))})}),a.forEach(function(t,n){d(t,"click",function(t){var n=this.getAttribute("data-toggle");null!=n&&(toggle(document.getElementById(n)),e.stop(t))});var a=i('[class*="menuLink"]',t);a.forEach(function(n,o){d(n,"keydown",function(n){27==n.keyCode?(deactivate(document.getElementById(t.getAttribute("id"))),e.stop(n)):9==n.keyCode||9==n.keyCode&&n.shiftKey?deactivate(document.getElementById(t.getAttribute("id"))):38==n.keyCode?(a[0==o?a.length-1:o-1].focus(),e.stop(n)):40==n.keyCode&&(a[(o+1)%a.length].focus(),e.stop(n))})})})},window.setTimeout(updateDepartmentsMenu,200),o("ie")<9||d(window,"resize",updateDepartmentsMenu),i("#searchFilterMenu > ul > li > a").on("click",function(e){document.getElementById("searchFilterButton").innerHTML=this.innerHTML,document.getElementById("categoryId").value=this.getAttribute("data-value"),deactivate(document.getElementById("searchFilterMenu"))}),i("#searchBox > .submitButton").on("click",function(e){var n=document.getElementById("SimpleSearchForm_SearchTerm");n.value=t.trim(n.value.replace(SearchJS.prohibitedCharacters,""));var a=t.trim(n.value.replace(/'|"/g,""));n.value&&""!=a&&document.getElementById("searchBox").submit()});var u=document.getElementById("searchBox");u&&d(u,"submit",function(n){var a=document.getElementById("SimpleSearchForm_SearchTerm"),o=a.value,d=t.trim(a.value.replace(/'|"/g,""));if(a.value=d,!a.value)return e.stop(n),!1;a.value=t.trim(o)}),wc.render.declareContext("departmentSubMenuContext",{targetId:""},""),wc.render.declareRefreshController({id:"departmentSubMenu_Controller",renderContext:wc.render.getContextById("departmentSubMenuContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){cursor_wait(),t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){updateDepartmentsMenu(),activate(document.getElementById(this.renderContext.properties.targetId)),cursor_clear()}}),setAjaxRefresh=function(e){this.ajaxRefresh=e}});