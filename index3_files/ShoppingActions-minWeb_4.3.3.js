shoppingActionsJS={langId:"-1",storeId:"",catalogId:"",userType:"",baseItemAddedToCart:!1,entitledItems:[],entitledItemJsonObject:null,selectedAttributesList:new Object,moreInfoUrl:"",isPopup:!1,displayPriceRange:!0,itemPriceJsonOject:[],allSwatchesArrayList:new Object,skuImageId:"",cookieKeyPrefix:"CompareItems_",cookieDelimiter:";",maxNumberProductsAllowedToCompare:4,minNumberProductsAllowedToCompare:2,baseCatalogEntryId:0,selectedProducts:new Object,productList:new Object,currencySymbol:"",compareReturnName:"",searchTerm:"",search01:"'",search02:'"',replaceStr01:/\\\'/g,replaceStr02:/\\\"/g,ampersandChar:/&/g,ampersandEntityName:"&amp;",productAddedList:new Object,setCompareReturnName:function(e){this.compareReturnName=e},setSearchTerm:function(e){this.searchTerm=e},setCommonParameters:function(e,t,i,r,a){this.langId=e,this.storeId=t,this.catalogId=i,this.userType=r,this.currencySymbol=a},setEntitledItems:function(e){this.entitledItems=e},getCatalogEntryId:function(e){var t=[],i=this.selectedAttributesList[e];for(attribute in i)t.push(attribute+"_"+i[attribute]);return this.resolveSKU(t)},getCatalogEntryIdforProduct:function(e){var t=[];for(attribute in e)t.push(attribute+"_"+e[attribute]);return this.resolveSKU(t)},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject},resolveSKU:function(e){console.debug("Resolving SKU >> "+e+">>"+this.entitledItems);var t="",i=e.length;if(1==this.entitledItems.length)return this.entitledItems[0].catentry_id;for(x in this.entitledItems){var t=this.entitledItems[x].catentry_id,r=this.entitledItems[x].Attributes,a=0;for(index in r)a++;if(0==i&&0==a)return t;if(0!=a&&i>=a){var o=0;for(attributeName in e){var n=e[attributeName];n in r&&o++}if(a==o)return console.debug("CatEntryId:"+t+" for Attribute: "+e),t}}return null},setSelectedAttribute:function(e,t,i,r,a){console.debug(e+" : "+t);var o=this.selectedAttributesList[i];null==o&&(o=new Object),t=t.replace(this.replaceStr01,this.search01),t=t.replace(this.replaceStr02,this.search02),t=t.replace(this.ampersandChar,this.ampersandEntityName),o[e]=t,this.moreInfoUrl=this.moreInfoUrl+"&"+e+"="+t,this.selectedAttributesList[i]=o,this.changeProdImage(i,e,t,r,a)},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue,isSingleSKU){var selectedAttributesForProduct=null;selectedAttributesForProduct=this.selectedProducts[productId]?this.selectedProducts[productId]:new Object,null!=selectedAttributeName&&""!=selectedAttributeName&&(selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue),this.selectedProducts[productId]=selectedAttributesForProduct;var entitledItemJSON=eval("("+dojo.byId("entitledItem_"+productId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryIdforProduct(selectedAttributesForProduct);if(null==catalogEntryId)catalogEntryId=0;else if(this.changePrice("entitledItem_"+productId,!1,!0,productId),null!=MerchandisingAssociationJS&&null!=MerchandisingAssociationJS.baseItemParams&&"BundleBean"==MerchandisingAssociationJS.baseItemParams.type)for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++)productId==MerchandisingAssociationJS.baseItemParams.components[idx].productId&&(MerchandisingAssociationJS.baseItemParams.components[idx].id=catalogEntryId);var productDetails=null;this.productList[productId]?productDetails=this.productList[productId]:(productDetails=new Object,this.productList[productId]=productDetails,productDetails.baseItemId=productId),productDetails.id=catalogEntryId,productDetails.quantity&&dojo.topic.publish("Quantity_Changed",dojo.toJson(productDetails)),isSingleSKU||0!=catalogEntryId&&dojo.topic.publish("DefiningAttributes_Resolved_"+productId,catalogEntryId,productId)},Add2ShopCartAjax:function(entitledItemId,quantity,isPopup,customParams){var entitledItemJSON;entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(null!=catalogEntryId){var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1);this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams,productId),this.baseItemAddedToCart=!0,null!=dijit.byId("second_level_category_popup")&&hidePopup("second_level_category_popup")}else 1==isPopup?(dojo.byId("second_level_category_popup").style.zIndex="1",MessageHelper.formErrorHandleClient("addToCartLinkAjax",storeNLS.ERR_RESOLVING_SKU)):(MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU),this.baseItemAddedToCart=!1)},AddItem2ShopCartAjax:function(e,t,i,r){var a=[];a.storeId=this.storeId,a.catalogId=this.catalogId,a.langId=this.langId,a.orderId=".",a.calculationUsage="-1,-2,-5,-6,-7",a.inventoryValidation="true";var o="AddOrderItem";if(this.productAddedList=new Object,dojo.isArray(e)&&dojo.isArray(t))for(var n=0;n<e.length;n++){if(!isPositiveInteger(t[n]))return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);a["catEntryId_"+(n+1)]=e[n],a["quantity_"+(n+1)]=t[n]}else{if(!isPositiveInteger(t))return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);a.catEntryId=e,a.quantity=t;var d=new Object;for(attr in this.selectedAttributesList["entitledItem_"+r])d[attr]=this.selectedAttributesList["entitledItem_"+r][attr];void 0==r?this.saveAddedProductInfo(t,e,e,d):this.saveAddedProductInfo(t,r,e,d)}if(null!=i&&"undefined"!=i){for(n in i)a[n]=i[n];"dynamicKit"==i.catalogEntryType&&(o="AddPreConfigurationToCart")}var s=document.getElementsByName("contractSelectForm_contractId");if(null!=s&&"undefined"!=s)for(n=0;n<s.length;n++)if(s[n].checked){a.contractId=s[n].value;break}submitRequest()&&(cursor_wait(),wc.service.invoke(o,a),this.baseItemAddedToCart=!0,document.getElementById("headerShopCartLink")&&"none"!=document.getElementById("headerShopCartLink").style.display?document.getElementById("headerShopCart").focus():document.getElementById("headerShopCart1")&&document.getElementById("headerShopCart1").focus())},AddBundle2ShopCartAjax:function(){var e="AddOrderItem",t=[];t.storeId=this.storeId,t.catalogId=this.catalogId,t.langId=this.langId,t.orderId=".",t.calculationUsage="-1,-2,-5,-6,-7",t.inventoryValidation="true";var i=1;this.productAddedList=new Object;for(productId in this.productList){var r=this.productList[productId],a=dojo.number.parse(r.quantity);if(0!=a){if(0==r.id)return void MessageHelper.displayErrorMessage(storeNLS.ERR_RESOLVING_SKU);if(isNaN(a)||0>a)return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);t["catEntryId_"+i]=r.id,t["quantity_"+i++]=a,this.baseItemAddedToCart=!0,this.saveAddedProductInfo(a,productId,r.id,this.selectedProducts[productId])}}submitRequest()&&(cursor_wait(),wc.service.invoke(e,t))},resetProductAddedList:function(){shoppingActionsJS.productAddedList=new Object},saveAddedProductInfo:function(e,t,i,r){var a="";null!=document.getElementById("ProductInfoName_"+t)?a=document.getElementById("ProductInfoName_"+t).value:null!=document.getElementById("ProductInfoName_"+i)&&(a=document.getElementById("ProductInfoName_"+i).value);var o="";null!=document.getElementById("ProductInfoImage_"+t)?o=document.getElementById("ProductInfoImage_"+t).value:null!=document.getElementById("ProductInfoImage_"+i)&&(o=document.getElementById("ProductInfoImage_"+i).value);var n="";null!=document.getElementById("ProductInfoPrice_"+t)?n=document.getElementById("ProductInfoPrice_"+t).value:null!=document.getElementById("ProductInfoPrice_"+i)&&(n=document.getElementById("ProductInfoPrice_"+i).value);var d=[a,o,n,e,r];t!=i?this.productAddedList[i]=d:this.productAddedList[t]=d,dojo.topic.publish("ProductInfo_Added",this.productAddedList)},setSKUImageId:function(e){this.skuImageId=e},getImageForSKU:function(e,t){var i=[],r=this.selectedAttributesList[e];for(attribute in r)i.push(attribute+"_"+r[attribute]);return this.resolveImageForSKU(i,t)},resolveImageForSKU:function(e,t){console.debug("Resolving SKU >> "+e+">>"+this.entitledItems);var i="",r=e.length;for(x in this.entitledItems){if(null!=t)var i=this.entitledItems[x][t];else var i=this.entitledItems[x].ItemImage467;var a=this.entitledItems[x].Attributes,o=0;for(index in a)o++;if(0==r&&0==o)return i;if(0!=o&&r>=o){var n=0;for(attributeName in e){var d=e[attributeName];d in a&&n++}if(o==n){console.debug("ItemImage:"+i+" for Attribute: "+e);var s=[];return s.push(i),s.push(this.entitledItems[x].ItemThumbnailImage),null!=this.entitledItems[x].ItemAngleThumbnail&&void 0!=this.entitledItems[x].ItemAngleThumbnail&&(s.push(this.entitledItems[x].ItemAngleThumbnail),s.push(this.entitledItems[x].ItemAngleFullImage)),s}}}return null},changeViewImages:function(e,t){var i=0;for(x in e){var r=i;i++,null!=dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+i)&&(dojo.byId("WC_CachedProductOnlyDisplay_images_1_"+i).src=e[x]),null!=dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+i)&&(dojo.byId("WC_CachedProductOnlyDisplay_links_1_"+i).href="JavaScript:changeThumbNail('productAngleLi"+r+"','"+t[x]+"');"),null!=dojo.byId("productAngleLi"+r)&&"selected"==dojo.byId("productAngleLi"+r).className&&changeThumbNail("productAngleLi"+r,t[x])}},changeProdImage:function(entitledItemId,swatchAttrName,swatchAttrValue,skuImageId,imageField){null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")),this.setEntitledItems(entitledItemJSON);var productId=entitledItemId.substring(entitledItemId.indexOf("_")+1),skuImage=null,imageArr=shoppingActionsJS.getImageForSKU(entitledItemId,imageField);if(null!=imageArr&&(skuImage=imageArr[0]),void 0!=skuImageId&&this.setSKUImageId(skuImageId),null!=skuImage){if(null!=dojo.byId(this.skuImageId)){document.getElementById(this.skuImageId).src=skuImage,null!=document.getElementById("ProductInfoImage_"+productId)&&(document.getElementById("ProductInfoImage_"+productId).value=skuImage);var itemAngleThumbnail=imageArr[2],itemAngleFullImage=imageArr[3];null!=itemAngleThumbnail&&void 0!=itemAngleThumbnail&&shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage)}}else{var imageFound=!1;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;if(null!=imageField)var itemImage=this.entitledItems[x][imageField];else var itemImage=this.entitledItems[x].ItemImage467;var itemAngleThumbnail=this.entitledItems[x].ItemAngleThumbnail,itemAngleFullImage=this.entitledItems[x].ItemAngleFullImage;for(y in Attributes){var index=y.indexOf("_"),entitledSwatchName=y.substring(0,index),entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){null!=dojo.byId(this.skuImageId)&&(dojo.byId(this.skuImageId).src=itemImage,null!=document.getElementById("ProductInfoImage_"+productId)&&(document.getElementById("ProductInfoImage_"+productId).value=itemImage)),null!=itemAngleThumbnail&&void 0!=itemAngleThumbnail&&shoppingActionsJS.changeViewImages(itemAngleThumbnail,itemAngleFullImage),imageFound=!0;break}}if(imageFound)break}}},updateSwatchListView:function(){for(var swatchArray=dojo.query("a[id^='swatch_array_']"),i=0;i<swatchArray.length;i++){var swatchArrayElement=swatchArray[i];eval(dojo.attr(swatchArrayElement,"href"))}for(var swatchSkuImage=dojo.query("a[id^='swatch_setSkuImage_']"),i=0;i<swatchSkuImage.length;i++){var swatchSkuImageElement=swatchSkuImage[i];eval(dojo.attr(swatchSkuImageElement,"href"))}for(var swatchDefault=dojo.query("a[id^='swatch_selectDefault_']"),i=0;i<swatchDefault.length;i++){var swatchDefaultElement=swatchDefault[i];eval(dojo.attr(swatchDefaultElement,"href"))}},selectSwatch:function(e,t,i,r,a,o){if(!dojo.hasClass("swatch_"+i+"_"+t,"color_swatch_disabled")){var n=this.selectedAttributesList[i];for(attribute in n){if(attribute==e&&n[attribute]!=t){var d=dojo.byId("swatch_"+i+"_"+n[attribute]);d.className="color_swatch",d.src=d.src.replace("_disabled.png","_enabled.png"),dojo.byId("swatch_link_"+i+"_"+n[attribute]).title=d.alt}null!=document.getElementById("swatch_link_"+i+"_"+n[attribute])&&document.getElementById("swatch_link_"+i+"_"+n[attribute]).setAttribute("aria-checked","false")}this.makeSwatchSelection(e,t,i,r,a,o)}},makeSwatchSelection:function(e,t,i,r,a,o){this.setSelectedAttribute(e,t,i,a,o),document.getElementById("swatch_"+i+"_"+t).className="color_swatch_selected",document.getElementById("swatch_link_"+i+"_"+t).setAttribute("aria-checked","true"),document.getElementById("swatch_selection_label_"+i+"_"+e).className="header color_swatch_label","none"==document.getElementById("swatch_selection_"+i+"_"+e).style.display&&(document.getElementById("swatch_selection_"+i+"_"+e).style.display="inline"),document.getElementById("swatch_selection_"+i+"_"+e).innerHTML=t,this.updateSwatchImages(e,i,r,o)},addToAllSwatchsArray:function(e,t,i,r){var a=this.allSwatchesArrayList[r];if(null==a&&(a=new Array),!this.existInAllSwatchsArray(e,t,a)){var o=new Array;o[0]=e,o[1]=t,o[2]=i,o[4]=document.getElementById("swatch_link_"+r+"_"+t).onclick,a.push(o),this.allSwatchesArrayList[r]=a}},existInAllSwatchsArray:function(e,t,i){for(var r=0;r<i.length;r++){var a=i[r][0],o=i[r][1];if(a==e&&o==t)return!0}return!1},makeDefaultSwatchSelection:function(entitledItemId,doNotDisable){0==this.entitledItems.length&&(null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")),this.setEntitledItems(entitledItemJSON));for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes;for(y in Attributes){var index=y.indexOf("_"),swatchName=y.substring(0,index),swatchValue=y.substring(index+1);this.makeSwatchSelection(swatchName,swatchValue,entitledItemId,doNotDisable,imageField)}break}},updateSwatchImages:function(e,t,i,r){for(var a=new Array,o=this.selectedAttributesList[t],n=o[e],d=this.allSwatchesArrayList[t],s=0;s<d.length;s++){var l=d[s][0],c=d[s][1],u=d[s][2],m=(d[s][3],d[s][4]);if(l!=i&&l!=e){var I=new Array;I[0]=l,I[1]=c,I[2]=u,I[4]=m,I[5]=!1,a.push(I)}}for(x in this.entitledItems){var g=this.entitledItems[x].Attributes;for(y in g){var h=y.indexOf("_"),p=y.substring(0,h),f=y.substring(h+1);if(p==e&&f==n)for(z in g){var b=z.indexOf("_"),_=z.substring(0,b),A=z.substring(b+1);if(y!=z)for(s in a){var v=a[s][0],S=a[s][1];_==v&&A==S&&(a[s][5]=!0)}}}}var P=[];for(s in a){var v=a[s][0],S=a[s][1],E=(a[s][2],a[s][3],a[s][4]),j=a[s][5];if(j){if("color_swatch_selected"!=document.getElementById("swatch_"+t+"_"+S).className){var w=dojo.byId("swatch_"+t+"_"+S);w.className="color_swatch",w.src=w.src.replace("_disabled.png","_enabled.png"),dojo.byId("swatch_link_"+t+"_"+S).title=w.alt}document.getElementById("swatch_link_"+t+"_"+S).setAttribute("aria-disabled","false"),document.getElementById("swatch_link_"+t+"_"+S).onclick=E}else if(v!=i){var w=dojo.byId("swatch_"+t+"_"+S),k=dojo.byId("swatch_link_"+t+"_"+S);w.className="color_swatch_disabled",k.onclick=null,w.src=w.src.replace("_enabled.png","_disabled.png");var N=storeNLS.INV_ATTR_UNAVAILABLE;k.title=dojo.string.substitute(N,{0:w.alt}),document.getElementById("swatch_link_"+t+"_"+S).setAttribute("aria-disabled","true"),o[v]==S&&P.push(a[s])}}for(s in P){var C=P[s][0],L=P[s][1];for(s in a){var v=a[s][0],S=a[s][1],j=a[s][5];if(v==C&&S!=L&&j){this.makeSwatchSelection(v,S,t,i,r);break}}}},changePrice:function(entitledItemId,isPopup,displayPriceRange,productId){this.displayPriceRange=displayPriceRange,this.isPopup=isPopup;var entitledItemJSON;entitledItemJSON=null==dojo.byId(entitledItemId)||this.isPopup?this.getEntitledItemJsonObject():eval("("+dojo.byId(entitledItemId).innerHTML+")");var catalogEntryId=null;if(this.setEntitledItems(entitledItemJSON),this.selectedProducts[productId])var catalogEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[productId]);else var catalogEntryId=this.getCatalogEntryId(entitledItemId);if(null!=catalogEntryId)if(null!=this.itemPriceJsonOject[catalogEntryId]&&"undefined"!=this.itemPriceJsonOject[catalogEntryId])this.displayPrice(this.itemPriceJsonOject[catalogEntryId].catalogEntry,productId),console.debug("ShoppingActions.changePrice: using stored json object.");else{var parameters={};parameters.storeId=this.storeId,parameters.langId=this.langId,parameters.catalogId=this.catalogId,parameters.catalogEntryId=catalogEntryId,parameters.productId=productId,dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByIDView",handleAs:"json-comment-filtered",content:parameters,service:this,load:shoppingActionsJS.displayPriceServiceResponse,error:function(e,t){console.debug("ShoppingActions.changePrice: Unexpected error occurred during an xhrPost request.")}})}else console.debug("ShoppingActions.changePrice: all attributes are not selected.")},displayPriceServiceResponse:function(e,t){var i=t.args.content.productId;shoppingActionsJS.itemPriceJsonOject[e.catalogEntry.catalogEntryIdentifier.uniqueID]=e,shoppingActionsJS.displayPrice(e.catalogEntry,i)},displayPrice:function(e,t){var i,r=shoppingActionsJS.isPopup;if(1==r&&(document.getElementById("productPrice").innerHTML=e.offerPrice,document.getElementById("productName").innerHTML=e.description[0].name,document.getElementById("productSKUValue").innerHTML=e.catalogEntryIdentifier.externalIdentifier.partNumber),0==r){var a="",o=dojo.currency.parse(e.listPrice,{symbol:this.currencySymbol}),n=dojo.currency.parse(e.offerPrice,{symbol:this.currencySymbol});if(this.setPriceInProductList(t,n),a=!e.listPriced||n>=o?"<span id='offerPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='price'>"+e.offerPrice+"</span>":"<span id='listPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='old_price'>"+e.listPrice+"</span><span id='offerPrice_"+e.catalogEntryIdentifier.uniqueID+"' class='price'>"+e.offerPrice+"</span>",document.getElementById("price_display_"+t).innerHTML=a+"<input type='hidden' id='ProductInfoPrice_"+e.catalogEntryIdentifier.uniqueID+"' value='"+e.offerPrice+"'/>",a="",1==shoppingActionsJS.displayPriceRange)for(var d in e.priceRange)e.priceRange[d].endingNumberOfUnits==e.priceRange[d].startingNumberOfUnits?(i=storeNLS.PQ_PRICE_X,a=a+"<p>"+dojo.string.substitute(i,{0:e.priceRange[d].startingNumberOfUnits})):"null"!=e.priceRange[d].endingNumberOfUnits?(i=storeNLS.PQ_PRICE_X_TO_Y,a=a+"<p>"+dojo.string.substitute(i,{0:e.priceRange[d].startingNumberOfUnits,1:e.priceRange[d].endingNumberOfUnits})):(i=storeNLS.PQ_PRICE_X_OR_MORE,a=a+"<p>"+dojo.string.substitute(i,{0:e.priceRange[d].startingNumberOfUnits})),a=a+" <span class='price'>"+e.priceRange[d].localizedPrice+"</span></p>";var s=dojo.byId("productLevelPriceRange_"+t),l=dojo.byId("itemLevelPriceRange_"+t);null!=s&&null==l?dojo.style(s,"display",""):""!=a&&null!=l?(a=storeNLS.PQ_PURCHASE+a,l.innerHTML=a,dojo.style(l,"display",""),null!=s&&dojo.style(s,"display","none")):""==a&&(null!=l&&dojo.style(l,"display","none"),null!=s&&dojo.style(s,"display",""));var c=dojo.query("#product_name_"+t+" > a");1==c.length?c[0].innerHTML=e.description[0].name:dojo.byId("product_name_"+t)&&(dojo.byId("product_name_"+t).innerHTML=e.description[0].name),null!=dojo.query("#widget_product_info_viewer > div[id^='PageHeading_']")&&dojo.query("#widget_product_info_viewer > div[id^='PageHeading_']").forEach(function(t){null!=t.childNodes&&3==t.childNodes.length&&(t.childNodes[1].innerHTML=e.description[0].name)}),null!=document.getElementById("ProductInfoName_"+t)&&(document.getElementById("ProductInfoName_"+t).value=e.description[0].name),document.getElementById("product_shortdescription_"+t)&&(document.getElementById("product_shortdescription_"+t).innerHTML=e.description[0].shortDescription),document.getElementById("product_SKU_"+t)&&(document.getElementById("product_SKU_"+t).innerHTML=storeNLS.SKU+" "+e.catalogEntryIdentifier.externalIdentifier.partNumber)}},showWCDialogPopup:function(e){var t=dijit.byId(e);null!=t?(t.closeButtonNode.style.display="none",t.show()):console.debug(e+" does not exist")},notifyAttributeChange:function(e){this.baseCatalogEntryId=e;this.selectedAttributesList["entitledItem_"+e];dojo.topic.publish("DefiningAttributes_Resolved_"+e,e,-1)},notifyQuantityChange:function(e){dojo.topic.publish("Quantity_Changed",e)},initCompare:function(e){if("compare"==e)this.checkForCompare();else{var t=this.cookieKeyPrefix+this.storeId,i="";dojo.cookie(t,i,{path:"/"})}},changeCompareBox:function(e,t){box=document.getElementById(e),box.checked=!box.checked,this.addOrRemoveFromCompare(t,box.checked)},addOrRemoveFromCompare:function(e,t){t?this.addToCompare(e):this.removeFromCompare(e)},addToCompare:function(e){var t=this.cookieKeyPrefix+this.storeId,i=dojo.cookie(t);if(null!=i&&(-1!=i.indexOf(e)||null==e))return void MessageHelper.displayErrorMessage(storeNLS.COMPARE_ITEM_EXISTS);var r=0;if(null!=i&&""!=i&&(r=i.split(this.cookieDelimiter).length),r<parseInt(this.maxNumberProductsAllowedToCompare)){var a="";a=null==i||""==i?e:i+this.cookieDelimiter+e,dojo.cookie(t,a,{path:"/"}),shoppingActionsJS.checkForCompare()}else this.showWCDialogPopup("widget_product_comparison_popup"),document.getElementById("comparebox_"+e).checked=!1,console.debug("You can only compare up to 4 products")},removeFromCompare:function(e){var t=this.cookieKeyPrefix+this.storeId,i=dojo.cookie(t),r=0;if(null!=i){if(""==dojo.trim(i))dojo.cookie(t,null,{expires:-1});else{var a=i.split(this.cookieDelimiter),o="";for(index in a)a[index]!=e&&(o=""==o?a[index]:o+this.cookieDelimiter+a[index]);dojo.cookie(t,o,{path:"/"}),r=o.split(this.cookieDelimiter).length}shoppingActionsJS.checkForCompare()}},compareProducts:function(e){var t="CompareProductsDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId+"&compareReturnName="+this.compareReturnName+"&searchTerm="+this.searchTerm;""!=e.top_category&&(t=t+"&top_category="+e.top_category),""!=e.parent_category_rn&&(t=t+"&parent_category_rn="+e.parent_category_rn),""!=e.categoryId&&(t=t+"&categoryId="+e.categoryId);var i=this.cookieKeyPrefix+this.storeId,r=dojo.cookie(i);null!=r&&""!=dojo.trim(r)&&(t=t+"&catentryId="+r);var a=location.href;-1==a.indexOf("?")?a+="?fromPage=compare":-1==a.indexOf("fromPage=compare")&&(a+="&fromPage=compare"),t=t+"&returnUrl="+encodeURIComponent(a),location.href=getAbsoluteURL()+t},setProductQuantity:function(e,t,i,r){var a=null;this.productList[t]?a=this.productList[t]:(a=new Object,this.productList[t]=a,a.baseItemId=t,"item"==e?a.id=t:a.id=0),a.quantity=i,dojo.topic.publish("Quantity_Changed",dojo.toJson(a)),a.price=dojo.number.parse(r)},quantityChanged:function(e,t){if(this.productList[e]){var i=this.productList[e];if(i.quantity=dojo.trim(t),dojo.topic.publish("Quantity_Changed",dojo.toJson(i)),null!=MerchandisingAssociationJS&&null!=MerchandisingAssociationJS.baseItemParams&&"BundleBean"==MerchandisingAssociationJS.baseItemParams.type)for(idx=0;idx<MerchandisingAssociationJS.baseItemParams.components.length;idx++)(e==MerchandisingAssociationJS.baseItemParams.components[idx].productId||e==MerchandisingAssociationJS.baseItemParams.components[idx].id)&&(MerchandisingAssociationJS.baseItemParams.components[idx].quantity=i.quantity)}},setPriceInProductList:function(e,t){var i=this.productList[e];i&&(i.price=t)},selectBundleItemSwatch:function(e,t,i,r){if(!dojo.hasClass("swatch_"+e+"_"+t+"_"+i,"color_swatch_disabled")){if(null!=dojo.byId("entitledItem_"+e)){var a,o=t+"_"+i;a=dojo.fromJson(dojo.byId("entitledItem_"+e).innerHTML);var n=new Array;for(idx in a){var d=!1,s=a[idx];for(attribute in s.Attributes)if(o==attribute){d=!0;break}if(d)for(attribute in s.Attributes){var l=attribute.substring(0,attribute.lastIndexOf("_"));l!=r&&l!=t&&n.push(attribute)}}var c=new Array,u=new Array;for(idx in a){var s=a[idx];for(attribute in s.Attributes){var l=attribute.substring(0,attribute.lastIndexOf("_"));if(l!=r&&l!=t){var m="swatch_"+e+"_"+attribute,I=m.replace("swatch_","swatch_link_");if(dojo.indexOf(n,attribute)>-1)dojo.hasClass(m,"color_swatch_selected")||(dojo.byId(m).className="color_swatch",dojo.byId(m).src=dojo.byId(m).src.replace("_disabled.png","_enabled.png"),dojo.byId(I).title=dojo.byId(m).alt,document.getElementById(I).setAttribute("aria-disabled","false"));else if(-1==dojo.indexOf(c,attribute)){c.push(attribute),dojo.hasClass(m,"color_swatch_selected")&&u.push(m),dojo.byId(m).className="color_swatch_disabled",dojo.byId(m).src=dojo.byId(m).src.replace("_enabled.png","_disabled.png");var g=storeNLS.INV_ATTR_UNAVAILABLE,h=dojo.byId(m).alt;dojo.byId(I).title=dojo.string.substitute(g,{0:h}),document.getElementById(I).setAttribute("aria-disabled","true")}}null!=document.getElementById("swatch_link_"+e+"_"+attribute)&&document.getElementById("swatch_link_"+e+"_"+attribute).setAttribute("aria-checked","false")}}for(idx in u){var p=u[idx],y=p.substring(0,p.lastIndexOf("_")),f=!1;dojo.query("[id^='"+y+"']").forEach(function(e,t,i){if(!f&&dojo.hasClass(e,"color_swatch")){var a=e.id.split("_");shoppingActionsJS.selectBundleItemSwatch(a[1],a[2],a[3],r),shoppingActionsJS.setSelectedAttributeOfProduct(a[1],a[2],a[3],!1),f=!0}})}}"none"==dojo.byId("swatch_selection_"+e+"_"+t).style.display&&(dojo.byId("swatch_selection_"+e+"_"+t).style.display="inline"),dojo.byId("swatch_selection_"+e+"_"+t).innerHTML=i;var b="swatch_"+e+"_"+t+"_",_="swatch_link_"+e+"_"+t+"_";dojo.query("img[id^='"+b+"']").forEach(function(e,t,i){dojo.hasClass(e,"color_swatch_disabled")?dojo.removeClass(e,"color_swatch"):dojo.addClass(e,"color_swatch"),dojo.removeClass(e,"color_swatch_selected")}),dojo.byId(b+i).className="color_swatch_selected",document.getElementById(_+i).setAttribute("aria-checked","true"),this.setSelectedAttributeOfProduct(e,t,i,!1),this.changeBundleItemImage(e,t,i,"productThumbNailImage_"+e)}},changeBundleItemImage:function(catalogEntryId,swatchAttrName,swatchAttrValue,skuImageId){var entitledItemId="entitledItem_"+catalogEntryId;null!=dojo.byId(entitledItemId)&&(entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")")),this.setEntitledItems(entitledItemJSON);var skuImage=null,imageArr=shoppingActionsJS.getImageForBundleItem(catalogEntryId);if(null!=imageArr&&(skuImage=imageArr[1]),void 0!=skuImageId&&this.setSKUImageId(skuImageId),null!=skuImage)null!=dojo.byId(this.skuImageId)&&(document.getElementById(this.skuImageId).src=skuImage,null!=document.getElementById("ProductInfoImage_"+catalogEntryId)&&(document.getElementById("ProductInfoImage_"+catalogEntryId).value=skuImage));else{var imageFound=!1;for(x in this.entitledItems){var Attributes=this.entitledItems[x].Attributes,itemImage=this.entitledItems[x].ItemThumbnailImage;for(y in Attributes){var index=y.indexOf("_"),entitledSwatchName=y.substring(0,index),entitledSwatchValue=y.substring(index+1);if(entitledSwatchName==swatchAttrName&&entitledSwatchValue==swatchAttrValue){document.getElementById(this.skuImageId).src=itemImage,null!=document.getElementById("ProductInfoImage_"+catalogEntryId)&&(document.getElementById("ProductInfoImage_"+catalogEntryId).value=itemImage),imageFound=!0;break}}if(imageFound)break}}},getImageForBundleItem:function(e){var t=[],i=this.selectedProducts[e];for(attribute in i)t.push(attribute+"_"+i[attribute]);return this.resolveImageForSKU(t)},checkForCompare:function(){require(["dojo/_base/array","dojo/cookie","dojo/on","dojo/query"],function(e,t,i,r){var a=t(shoppingActionsJS.cookieKeyPrefix+shoppingActionsJS.storeId);a=a?a.split(shoppingActionsJS.cookieDelimiter):[];var o=r(".compareCheckboxLabels > label");r(".compare_target").forEach(function(t){var i=r('input[type="checkbox"]',t)[0];i.checked=-1!=e.indexOf(a,i.value);var n=i.checked?a.length>1?2:1:0;t.setAttribute("data-state",n.toString());var d=r('label[for="'+i.id+'"]',t)[0];d.innerHTML=o[n].innerHTML})})},replaceItemAjaxHelper:function(e,t,i,r,a,o){var n=[];n.storeId=WCParamJS.storeId,n.catalogId=WCParamJS.catalogId,n.langId=WCParamJS.langId,n.orderItemId=i,n.orderId=".",CheckoutHelperJS.shoppingCartPage?n.calculationUsage="-1,-2,-5,-6,-7":n.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var d=[];d.storeId=WCParamJS.storeId,d.catalogId=WCParamJS.catalogId,d.langId=WCParamJS.langId,d.catEntryId=e,d.quantity=t,d.orderId=".",CheckoutHelperJS.shoppingCartPage?d.calculationUsage="-1,-2,-5,-6,-7":d.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var s=[];s.storeId=WCParamJS.storeId,s.catalogId=WCParamJS.catalogId,s.langId=WCParamJS.langId,s.orderId=".",CheckoutHelperJS.shoppingCartPage?s.calculationUsage="-1,-2,-5,-6,-7":s.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var l=!1,c=!0;null!=r&&""!=r&&(s.addressId=r),null!=a&&""!=a&&(s.shipModeId=a),null!=o&&""!=o&&(s.physicalStoreId=o,c=!1),null==s.shipModeId||null==s.addressId&&null==s.physicalStoreId||(l=!0),c&&(s.allocate="***",s.backorder="***",s.remerge="***",s.check="*n"),wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(e){l?wc.service.invoke("AjaxAddOrderItemTemp",d):wc.service.invoke("AjaxAddOrderItem",d)},failureHandler:function(e){e.errorMessage?MessageHelper.displayErrorMessage(e.errorMessage):e.errorMessageKey&&MessageHelper.displayErrorMessage(e.errorMessageKey),cursor_clear()}}),wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(e){c&&(s.orderItemId=e.orderItemId[0]),MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_ADDED),wc.service.invoke("OrderItemAddressShipMethodUpdate",s)},failureHandler:function(e){MessageHelper.displayErrorMessage(e.errorMessageKey)}}),submitRequest()&&(cursor_wait(),wc.service.invoke("AjaxReplaceItem",n))},customizeDynamicKit:function(e,t,i){var r=[];if(r.storeId=this.storeId,r.catalogId=this.catalogId,r.langId=this.langId,r.catEntryId=e,r.quantity=t,!isPositiveInteger(t))return void MessageHelper.displayErrorMessage(storeNLS.QUANTITY_INPUT_ERROR);var a=document.getElementsByName("contractSelectForm_contractId");if(null!=a&&"undefined"!=a)for(n=0;n<a.length;n++)if(a[n].checked){r.contractId=a[n].value;break}if(null!=i&&"undefined"!=i)for(n in i)r[n]=i[n];if(submitRequest()){cursor_wait();var o="ConfigureView",n=0;for(param in r)o+=(0==n++?"?":"&")+param+"="+r[param];document.location.href=getAbsoluteURL()+o}}},dojo.topic.subscribe("ProductInfo_Reset",shoppingActionsJS.resetProductAddedList),require(["dojo/on","dojo/has","dojo/_base/sniff","dojo/domReady!"],function(e,t){t("ie")<9&&e(document,'.compare_target > input[type="checkbox"]:click',function(e){this.blur(),this.focus()})});